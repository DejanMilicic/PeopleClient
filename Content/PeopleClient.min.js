function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD;a=self;b=a.PeopleClient=a.PeopleClient||{};c=b.App=b.App||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Mvu=d.Mvu||{};g=f.App=f.App||{};h=b.StateModule=b.StateModule||{};i=b.Update=b.Update||{};j=b.View=b.View||{};k=a.PeopleClient_JsonEncoder=a.PeopleClient_JsonEncoder||{};l=a.PeopleClient_JsonDecoder=a.PeopleClient_JsonDecoder||{};m=a.PeopleClient_Router=a.PeopleClient_Router||{};n=a.PeopleClient_Templates=a.PeopleClient_Templates||{};o=d.Obj=d.Obj||{};p=f.Pager=f.Pager||{};q=a.StartupCode$PeopleClient$Model=a.StartupCode$PeopleClient$Model||{};r=d.ClientSideJson=d.ClientSideJson||{};s=r.Provider=r.Provider||{};t=b.PersonEditorStateModule=b.PersonEditorStateModule||{};u=f.Action=f.Action||{};v=d.Collections=d.Collections||{};w=v.FSharpMap=v.FSharpMap||{};x=d.Seq=d.Seq||{};y=v.Map=v.Map||{};z=d.Option=d.Option||{};A=j.CreatePerson=j.CreatePerson||{};B=j.EditPerson=j.EditPerson||{};C=j.PeopleList=j.PeopleList||{};D=d.UI=d.UI||{};E=D.Var=D.Var||{};F=a.StartupCode$PeopleClient$App=a.StartupCode$PeopleClient$App||{};G=D.Client=D.Client||{};H=G.Templates=G.Templates||{};I=D.Doc=D.Doc||{};J=d.JavaScript=d.JavaScript||{};K=J.Pervasives=J.Pervasives||{};L=d.Ref=d.Ref||{};M=d.Unchecked=d.Unchecked||{};N=d.Lazy=d.Lazy||{};O=J.Promise=J.Promise||{};P=d.Sitelets=d.Sitelets||{};Q=P.RouterModule=P.RouterModule||{};R=v.MapUtil=v.MapUtil||{};S=d.List=d.List||{};T=d.Enumerator=d.Enumerator||{};U=T.T=T.T||{};V=a.StartupCode$PeopleClient$View=a.StartupCode$PeopleClient$View||{};W=D.Router=D.Router||{};X=D.Var$1=D.Var$1||{};Y=D.View=D.View||{};Z=J.JS=J.JS||{};_0=d.Arrays=d.Arrays||{};_1=a.Object;_2=a.EventTarget;_3=a.Node;_4=v.Dictionary=v.Dictionary||{};_5=D.Elt=D.Elt||{};_6=G.EltUpdater=G.EltUpdater||{};_7=d.Numeric=d.Numeric||{};_8=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};_9=_8.LazyRecord=_8.LazyRecord||{};_=D.HtmlModule=D.HtmlModule||{};$=_.attr=_.attr||{};ba=f.Page=f.Page||{};bb=S.T=S.T||{};bc=d.Concurrency=d.Concurrency||{};bd=P.Route=P.Route||{};be=a.StartupCode$PeopleClient$Update=a.StartupCode$PeopleClient$Update||{};bf=v.BalancedTree=v.BalancedTree||{};bg=bf.Tree=bf.Tree||{};bh=v.Pair=v.Pair||{};bi=d.Utils=d.Utils||{};bj=j.Common=j.Common||{};bk=bj.EditFormParams=bj.EditFormParams||{};bl=D.Templating=D.Templating||{};bm=bl.Runtime=bl.Runtime||{};bn=bm.Server=bm.Server||{};bo=bn.TemplateInstance=bn.TemplateInstance||{};bp=bn.ProviderBuilder=bn.ProviderBuilder||{};bq=bn.Handler=bn.Handler||{};br=D.AttrModule=D.AttrModule||{};bs=a.WindowOrWorkerGlobalScope;bt=D.Abbrev=D.Abbrev||{};bu=bt.Fresh=bt.Fresh||{};bv=P.RouterOperators=P.RouterOperators||{};bw=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bx=v.HashSet=v.HashSet||{};by=D.Docs=D.Docs||{};bz=D.ConcreteVar=D.ConcreteVar||{};bA=D.Snap=D.Snap||{};bB=D.Updates=D.Updates||{};bC=D.DocElemNode=D.DocElemNode||{};bD=D.AttrProxy=D.AttrProxy||{};bE=bc.AsyncBody=bc.AsyncBody||{};bF=a.Error;bG=J.NonStandardPromiseRejectionException=J.NonStandardPromiseRejectionException||{};bH=P.Router=P.Router||{};bI=P.PathUtil=P.PathUtil||{};bJ=d.Strings=d.Strings||{};bK=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bL=a.System=a.System||{};bM=bL.Guid=bL.Guid||{};bN=v.List=v.List||{};bO=D.Attrs=D.Attrs||{};bP=D.DomUtility=D.DomUtility||{};bQ=P.List=P.List||{};bR=v.DictionaryUtil=v.DictionaryUtil||{};bS=H.Prepare=H.Prepare||{};bT=d.Slice=d.Slice||{};bU=v.KeyCollection=v.KeyCollection||{};bV=a.CharacterData;bW=D.An=D.An||{};bX=G.Settings=G.Settings||{};bY=bt.Mailbox=bt.Mailbox||{};bZ=bc.CT=bc.CT||{};b0=G.Attrs=G.Attrs||{};b1=b0.Dyn=b0.Dyn||{};b2=d.InvalidOperationException=d.InvalidOperationException||{};b3=bc.Scheduler=bc.Scheduler||{};b4=d.OperationCanceledException=d.OperationCanceledException||{};b5=d.CancellationTokenSource=d.CancellationTokenSource||{};b6=D.FromView=D.FromView||{};b7=D.Array=D.Array||{};b8=D.DynamicAttrNode=D.DynamicAttrNode||{};b9=bn.TemplateInitializer=bn.TemplateInitializer||{};b_=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};b$=a.StartupCode$WebSharper_Sitelets$Router=a.StartupCode$WebSharper_Sitelets$Router||{};ca=G.Docs=G.Docs||{};cb=ca.RunState=ca.RunState||{};cc=ca.NodeSet=ca.NodeSet||{};cd=D.Anims=D.Anims||{};ce=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cf=D.CheckedInput=D.CheckedInput||{};cg=P.StringEncoding=P.StringEncoding||{};ch=d.Char=d.Char||{};ci=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};cj=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};ck=D.AppendList=D.AppendList||{};cl=v.HashSetUtil=v.HashSetUtil||{};cm=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};cn=D.Easing=D.Easing||{};co=bt.HashSet=bt.HashSet||{};cp=D.BindVar=D.BindVar||{};cq=D.String=D.String||{};cr=d.Queue=d.Queue||{};cs=v.ValueCollection=v.ValueCollection||{};ct=ca.DomNodes=ca.DomNodes||{};cu=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cv=d.FormatException=d.FormatException||{};cw=a.console;cx=a.IntelliFactory;cy=cx&&cx.Runtime;cz=a.JSON;cA=a.Number;cB=a.Math;cC=a.Date;cD=a.String;c.Main=function(){var cE,cF;cE=g.Run(g.WithLog(function(cG,cH){cw.log((k.j())(cG));return cw.log((k.j$4())(cH));},g.WithInitMessage({$:2,$0:false},(cF=g.CreatePaged(h.Init(),i.UpdateApp,j.Page),g.WithCustomRouting(c.router(),function(cG){return cG.Page;},i.Goto,cF)))));H.LoadLocalTemplates("");I.RunById("main",cE);};c.router=function(){F.$cctor();return F.router;};e.FailWith=function(cE){throw new bF(cE);};e.InvalidOp=function(cE){throw new b2.New(cE);};e.KeyValue=function(cE){return[cE.K,cE.V];};g.CreatePaged=function(cE,cF,cG){function cH(cI,cJ){return(new p.New(cG,cI,cJ)).get_Doc();}return g.Create(cE,cF,function(cI){return function(cJ){return cH(cI,cJ);};});};g.WithCustomRouting=function(cE,cF,cG,cH){return g.withRouting(X.Lens(cH.Var,cF,function(cI,cJ){return cG(cJ,cI);}),cE,cF,cH);};g.WithInitMessage=function(cE,cF){return g.WithInitAction({$:3,$0:function(cG){cG(cE);}},cF);};g.WithLog=function(cE,cF){function cG(cH,cI,cJ){var cK;cK=((cF.Update(cH))(cI))(cJ);cE(cI,cK==null?cJ:cK.$0);return cK;}return g.New(cF.Init,cF.Var,cF.View,cy.Curried3(cG),cF.Render);};g.Run=function(cE){function cF(cG){cE.Var.UpdateMaybe((cE.Update(cF))(cG));}cE.Init(cF);return(cE.Render(cF))(cE.View);};g.Create=function(cE,cF,cG){function cH(cI,cJ,cK){return g.applyAction(cI,cK,cF(cJ,cK));}return g.create(cE,cy.Curried3(cH),cG);};g.withRouting=function(cE,cF,cG,cH){return g.New(function(cI){cH.Init(cI);W.InstallHashInto(cE,cG(cH.Var.Get()),cF);},cH.Var,cH.View,cH.Update,cH.Render);};g.WithInitAction=function(cE,cF){return g.New(function(cG){var cH;cF.Init(cG);cH=g.applyAction(cG,cF.Var.Get(),cE);cH==null?void 0:cF.Var.Set(cH.$0);},cF.Var,cF.View,cF.Update,cF.Render);};g.create=function(cE,cF,cG){var cH;cH=X.Create$1(cE);return g.New(a.ignore,cH,cH.get_View(),cF,cG);};g.applyAction=function(cE,cF,cG){function cH(cI,cJ){var cK;cK=g.applyAction(cE,cI==null?cF:cI.$0,cJ);return cK==null?cI:cK;}return cG.$==1?{$:1,$0:cG.$0}:cG.$==2?{$:1,$0:cG.$0(cF)}:cG.$==3?(cG.$0(cE),null):cG.$==4?(bc.Start(cG.$0(cE),null),null):cG.$==5?(((cy.Curried3(x.fold))(cH))(null))(cG.$0):null;};h.Init=function(){q.$cctor();return q.Init$1;};i.UpdateApp=function(cE,cF){var cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP;return cE.$==1?{$:1,$0:{People:cF.People,Refreshing:cF.Refreshing,Error:cF.Error,Page:cF.Page,Editing:i.UpdatePerson(cE.$0,cF.Editing),Deleting:cF.Deleting}}:cE.$==2?(cG=cE.$0,i.DispatchAjax({$:0},function(cQ){return{$:8,$0:((s.DecodeArray(l.j))())(cQ),$1:cG};})):cE.$==3?(cH=t.TryToData(0,cF.Editing),cH!=null&&cH.$==1?i.DispatchAjax({$:2,$0:cH.$0},function(){return{$:2,$0:true};}):{$:1,$0:{People:cF.People,Refreshing:cF.Refreshing,Error:{$:1,$0:"Invalid person"},Page:cF.Page,Editing:cF.Editing,Deleting:cF.Deleting}}):cE.$==4?(cI=t.TryToData(cE.$0,cF.Editing),cI!=null&&cI.$==1?i.DispatchAjax({$:3,$0:cI.$0},function(){return{$:2,$0:true};}):{$:1,$0:{People:cF.People,Refreshing:cF.Refreshing,Error:{$:1,$0:"Invalid person"},Page:cF.Page,Editing:cF.Editing,Deleting:cF.Deleting}}):cE.$==5?{$:1,$0:{People:cF.People,Refreshing:cF.Refreshing,Error:cF.Error,Page:cF.Page,Editing:cF.Editing,Deleting:{$:1,$0:cE.$0}}}:cE.$==7?{$:1,$0:{People:cF.People,Refreshing:cF.Refreshing,Error:cF.Error,Page:cF.Page,Editing:cF.Editing,Deleting:null}}:cE.$==6?(cJ=cF.Deleting,cJ!=null&&cJ.$==1?i.DispatchAjax({$:4,$0:cJ.$0},function(){return{$:2,$0:true};}):u.DoNothing):cE.$==8?(cK=cE.$0,(cL=new w.New(S.ofSeq(x.delay(function(){return x.map(function(cQ){return[cQ.id,cQ];},cK);}))),(cM=cE.$1?{$:0}:cF.Page,{$:1,$0:{People:cL,Refreshing:false,Error:null,Page:cM,Editing:cM.$==2?(cN=(cO=y.TryFind(cM.$0,cL),cO==null?null:{$:1,$0:t.OfData(cO.$0)}),cN==null?cF.Editing:cN.$0):cF.Editing,Deleting:null}}))):cE.$==9?{$:1,$0:{People:cF.People,Refreshing:false,Error:{$:1,$0:cE.$0},Page:cF.Page,Editing:cF.Editing,Deleting:cF.Deleting}}:(cP=cE.$0,{$:2,$0:function(cQ){return i.Goto(cP,cQ);}});};i.Goto=function(cE,cF){var cG,cH,cI;return cE.$==1?{People:cF.People,Refreshing:cF.Refreshing,Error:cF.Error,Page:{$:1},Editing:t.Init(),Deleting:cF.Deleting}:cE.$==2?(cG=cE.$0,{People:cF.People,Refreshing:cF.Refreshing,Error:cF.Error,Page:{$:2,$0:cG},Editing:(cH=(cI=y.TryFind(cG,cF.People),cI==null?null:{$:1,$0:t.OfData(cI.$0)}),cH==null?cF.Editing:cH.$0),Deleting:cF.Deleting}):{People:cF.People,Refreshing:cF.Refreshing,Error:cF.Error,Page:{$:0},Editing:cF.Editing,Deleting:cF.Deleting};};i.UpdatePerson=function(cE,cF){return cE.$==1?{FirstName:cF.FirstName,LastName:cE.$0,Born:cF.Born,HasDied:cF.HasDied,Died:cF.Died}:cE.$==2?{FirstName:cF.FirstName,LastName:cF.LastName,Born:cE.$0,HasDied:cF.HasDied,Died:cF.Died}:cE.$==3?{FirstName:cF.FirstName,LastName:cF.LastName,Born:cF.Born,HasDied:cF.HasDied,Died:cE.$0}:cE.$==4?{FirstName:cF.FirstName,LastName:cF.LastName,Born:cF.Born,HasDied:cE.$0,Died:cF.Died}:{FirstName:cE.$0,LastName:cF.LastName,Born:cF.Born,HasDied:cF.HasDied,Died:cF.Died};};i.DispatchAjax=function(cE,cF){return u.op_Addition({$:2,$0:function(cG){return{People:cG.People,Refreshing:true,Error:cG.Error,Page:cG.Page,Editing:cG.Editing,Deleting:cG.Deleting};}},{$:4,$0:function(cG){var cH;cH=null;return bc.Delay(function(){return bc.TryWith(bc.Delay(function(){return bc.Bind(bc.Sleep(1000),function(){var cI;function cJ(){var cK,cL,cM;return(cK={$:1,$0:cy.DeleteEmptyFields({DefaultAllows:(cL=null,cL?cL.$0:void 0),EndPoint:(cM={$:1,$0:cE},cM?cM.$0:void 0)},["DefaultAllows","EndPoint"])},Q.FetchWith({$:1,$0:"https://peopleapi.websharper.com"},{},i.route(),cK)).then(function(cN){return cN.json();});}return bc.Bind(O.AsAsync((cI=null,new a.Promise(function(cK){cK(cJ());}))),function(cK){cG(cF(cK));return bc.Zero();});});}),function(cI){cG({$:9,$0:cI.message});return bc.Zero();});});}});};i.route=function(){be.$cctor();return be.route;};j.Page=function(cE){var cF;cF=cE.Page;return cF.$==1?(A.Page())():cF.$==2?(B.Page())(cF.$0):(C.Page())();};k.j=function(){return k._v?k._v:k._v=(s.EncodeUnion(void 0,"type",[["Goto",[["$0","page",k.j$3,0]]],["UpdateEditing",[["$0","msg",k.j$2,0]]],["RefreshList",[["$0","gotoList",s.Id(),0]]],["SubmitCreatePerson",[]],["SubmitEditPerson",[["$0","id",s.Id(),0]]],["RequestDeletePerson",[["$0","id",s.Id(),0]]],["ConfirmDeletePerson",[]],["CancelDeletePerson",[]],["ListRefreshed",[["$0","people",s.EncodeArray(k.j$1),0],["$1","gotoList",s.Id(),0]]],["Error",[["$0","error",s.Id(),0]]]]))();};k.j$4=function(){return k._v$4?k._v$4:k._v$4=(s.EncodeRecord(void 0,[["People",s.EncodeArrayMap(s.Id(),k.j$1),0],["Refreshing",s.Id(),0],["Error",s.Id(),1],["Page",k.j$3,0],["Editing",s.Id(),0],["Deleting",s.Id(),1]]))();};l.j=function(){return l._v?l._v:l._v=(s.DecodeRecord(void 0,[["id",s.Id(),0],["firstName",s.Id(),0],["lastName",s.Id(),0],["born",s.DecodeDateTime(),0],["died",s.DecodeDateTime(),1]]))();};k.j$3=function(){return k._v$3?k._v$3:k._v$3=(s.EncodeUnion(void 0,"$",[[0,[]],[1,[]],[2,[["$0","Item",s.Id(),0]]]]))();};k.j$2=function(){return k._v$2?k._v$2:k._v$2=(s.EncodeUnion(void 0,{hasDied:4,died:3,born:2,lastName:1,firstName:0},[["SetFirstName",[["$0","firstName",s.Id(),0]]],["SetLastName",[["$0","lastName",s.Id(),0]]],["SetBorn",[["$0","born",s.Id(),0]]],["SetDied",[["$0","died",s.Id(),0]]],["SetHasDied",[["$0","hasDied",s.Id(),0]]]]))();};k.j$1=function(){return k._v$1?k._v$1:k._v$1=(s.EncodeRecord(void 0,[["id",s.Id(),0],["firstName",s.Id(),0],["lastName",s.Id(),0],["born",s.EncodeDateTime(),0],["died",s.EncodeDateTime(),1]]))();};m.r$2=function(){return bv.JSUnion(void 0,[[null,[[null,[]]],[]],[null,[[null,["create"]]],[]],[null,[[null,["edit"]]],[bv.rInt()]]]);};n.table=function(cE){H.LoadLocalTemplates("index");return cE?H.NamedTemplate("index",{$:1,$0:"table"},cE):void 0;};m.r$1=function(){return bv.JSUnion(void 0,[[null,[[null,[]]],[]],[null,[[null,["api"]]],[bv.rCors(m.r())]]]);};n.form=function(cE){H.LoadLocalTemplates("index");return cE?H.NamedTemplate("index",{$:1,$0:"form"},cE):void 0;};n.row=function(cE){H.LoadLocalTemplates("index");return cE?H.NamedTemplate("index",{$:1,$0:"row"},cE):void 0;};m.r=function(){return bv.JSUnion(void 0,[[null,[[{$:1,$0:"GET"},["people"]]],[]],[null,[[{$:1,$0:"GET"},["people"]]],[bv.rInt()]],[null,[[{$:1,$0:"POST"},["people"]]],[Q.Body(function(cE){try{return{$:1,$0:(l.j())(cz.parse(cE))};}catch(cF){return null;}},function(cE){return cz.stringify((k.j$1())(cE));})]],[null,[[{$:1,$0:"PUT"},["people"]]],[Q.Body(function(cE){try{return{$:1,$0:(l.j())(cz.parse(cE))};}catch(cF){return null;}},function(cE){return cz.stringify((k.j$1())(cE));})]],[null,[[{$:1,$0:"DELETE"},["people"]]],[bv.rInt()]]]);};o=d.Obj=cy.Class({Equals:function(cE){return this===cE;},GetHashCode:function(){return -1;}},null,o);o.New=cy.Ctor(function(){},o);p=f.Pager=cy.Class({get_Doc:function(){return this.container$1;},container$2:function(){var cE;function cF(cG,cH){var cI,cJ,cK,cL,cM,cN,cO,cP;cK=cE.render(cH);cL=((cK.Render(d.checkThis(cE["this"][0])))(cE.dispatch))(cE.model);cM=cL.elt;cN=cG.childNodes;for(cO=0,cP=cN.length-1;cO<=cP;cO++)if(cN[cO]!==cM)cN[cO].setAttribute("aria-hidden","true");cM.removeAttribute("aria-hidden");cI=cE.toRemove;cI!=null&&cI.$==1?cI.$0!==cL?(cJ=cI.$0,cK.UsesTransition?cJ.elt.dataset.wsRemoving="true":cG.removeChild(cJ.elt),N.Force(cE.container).RemoveUpdated(cJ)):void 0:void 0;!cG.contains(cM)?(cM.setAttribute("aria-hidden","true"),cG.appendChild(cM),N.Force(cE.container).AddUpdated(cL),a.requestAnimationFrame(function(){cM.removeAttribute("aria-hidden");})):void 0;return cE.toRemove=cK.KeepInDom?null:{$:1,$0:cL};}cE=this;return I.Element("div",[bD.Create("class","ws-page-container"),br.DynamicCustom(function(cG){return function(cH){return cF(cG,cH);};},this.model)],[]).ToUpdater();},RemoveIfNeeded:function(cE){if(cE.dataset.wsRemoving==="true"){cE.dataset.wsRemoving="false";this.container$1.elt.removeChild(cE);}}},o,p);p.New=cy.Ctor(function(cE,cF,cG){var cH;cH=this;o.New.call(this);this["this"]=L.New(null);new o.New();this.render=cE;this.dispatch=cF;this.model=cG;this["this"][0]=this;this.toRemove=null;this.container=N.Create(function(){return cH.container$2();});this.container$1=N.Force(this.container);this.init=1;},p);q.$cctor=function(){q.$cctor=a.ignore;q.Init={FirstName:"",LastName:"",Born:"",HasDied:false,Died:""};q.Init$1={People:new w.New([]),Refreshing:true,Error:null,Page:{$:0},Editing:t.Init(),Deleting:null};};s.DecodeArray=function(cE){return s.EncodeArray(cE);};s.EncodeUnion=function(cE,cF,cG){return function(){return function(cH){var cI,cJ;function cK(cL,cM,cN,cO){var cP,cQ,cR;if(cL===null){cP=(cN(null))(cH.$0);for(var cS in cP)if(function(cT){cI[cT]=cP[cT];return false;}(cS))break;}else if(cO===0)cI[cM]=(cN(null))(cH[cL]);else if(cO===1){cR=cH[cL];cR==null?void 0:cI[cM]=(cN(null))(cR.$0);}else e.FailWith("Invalid field option kind");}return typeof cH==="object"&&cH!=null?(cI={},(cJ=_0.get(cG,cH.$),(M.Equals(typeof cF,"string")?cI[cF]=cJ[0]:void 0,_0.iter(function(cL){return cK(cL[0],cL[1],cL[2],cL[3]);},cJ[1]),cI))):cH;};};};s.Id=cy.Curried3(function(cE,cF,cG){return cG;});s.EncodeArray=cy.Curried3(function(cE,cF,cG){return _0.map(cE(),cG);});s.EncodeRecord=function(cE,cF){return function(){return function(cG){var cH;function cI(cJ,cK,cL){var cM;if(cL===0)cH[cJ]=(cK(null))(cG[cJ]);else if(cL===1){cM=cG[cJ];cM==null?void 0:cH[cJ]=(cK(null))(cM.$0);}else if(cL===2){if(cG.hasOwnProperty(cJ))cH[cJ]=(cK(null))(cG[cJ]);}else if(cL===3){if(cG[cJ]===void 0)cH[cJ]=(cK(null))(cG[cJ]);}else e.FailWith("Invalid field option kind");}cH={};_0.iter(function(cJ){return cI(cJ[0],cJ[1],cJ[2]);},cF);return cH;};};};s.EncodeArrayMap=function(cE,cF){return function(){return function(cG){var cH,cI,cJ;cH=[];cI=cE();cJ=cF();y.Iterate(function(cK,cL){var cM;cM=[[cI(cK),cJ(cL)]],cH.push.apply(cH,cM);},cG);return cH;};};};s.DecodeRecord=function(cE,cF){return function(){return function(cG){var cH;function cI(cJ,cK,cL){if(cL===0){if(cG.hasOwnProperty(cJ))cH[cJ]=(cK(null))(cG[cJ]);else e.FailWith("Missing mandatory field: "+cJ);}else if(cL===1)cH[cJ]=cG.hasOwnProperty(cJ)?{$:1,$0:(cK(null))(cG[cJ])}:null;else if(cL===2){if(cG.hasOwnProperty(cJ))cH[cJ]=(cK(null))(cG[cJ]);}else if(cL===3){if(cG[cJ]===void 0)cH[cJ]=(cK(null))(cG[cJ]);}else e.FailWith("Invalid field option kind");}cH=cE===void 0?{}:new cE();_0.iter(function(cJ){return cI(cJ[0],cJ[1],cJ[2]);},cF);return cH;};};};s.DecodeDateTime=cy.Curried3(function(cE,cF,cG){return cG.hasOwnProperty("d")?(new a.Date(cG.d)).getTime():(new a.Date(cG)).getTime();});s.EncodeDateTime=cy.Curried3(function(cE,cF,cG){return(new a.Date(cG)).toISOString();});t.TryToData=function(cE,cF){var cG,cH,cI,cJ;cG=t.TryParseDate(cF.Born);return cG!=null&&cG.$==1?(cH=cF.HasDied,(cI=t.TryParseDate(cF.Died),(cH?cI==null||(cJ=[cI,cH],false):(cJ=[cI,cH],false))?null:{$:1,$0:{id:cE,firstName:cF.FirstName,lastName:cF.LastName,born:cG.$0,died:cJ[1]?cJ[0]:null}})):null;};t.OfData=function(cE){var cF;return{FirstName:cE.firstName,LastName:cE.lastName,Born:t.DateToString(cE.born),HasDied:cE.died!=null,Died:(cF=cE.died,cF!=null&&cF.$==1?t.DateToString(cF.$0):"")};};t.Init=function(){q.$cctor();return q.Init;};t.TryParseDate=function(cE){var cF;cF=new a.Date(cE);return cA.isNaN(cF.getTime())?null:{$:1,$0:cF.getTime()};};t.DateToString=function(cE){return((((cy.Curried(function(cF,cG,cH,cI){return cF(bi.padNumLeft(a.String(cG),4)+"-"+bi.padNumLeft(a.String(cH),2)+"-"+bi.padNumLeft(a.String(cI),2));},4))(a.id))((new a.Date(cE)).getFullYear()))((new a.Date(cE)).getMonth()+1))((new a.Date(cE)).getDate());};u.DoNothing={$:0};u.op_Addition=function(cE,cF){return cF.$==0?cE:cF.$==5?cE.$==0?cF:cE.$==5?{$:5,$0:S.append(cE.$0,cF.$0)}:{$:5,$0:new bb({$:1,$0:cE,$1:cF.$0})}:cE.$==0?cF:cE.$==5?{$:5,$0:S.append(cE.$0,S.ofArray([cF]))}:{$:5,$0:S.ofArray([cE,cF])};};w=v.FSharpMap=cy.Class({TryFind:function(cE){var cF;cF=bf.TryFind(bh.New(cE,void 0),this.tree);return cF==null?null:{$:1,$0:cF.$0.Value};},get_IsEmpty:function(){return this.tree==null;},Equals:function(cE){return this.get_Count()===cE.get_Count()&&x.forall2(M.Equals,this,cE);},GetEnumerator$1:function(){return T.Get(x.map(function(cE){return{K:cE.Key,V:cE.Value};},bf.Enumerate(false,this.tree)));},get_Count:function(){var cE;cE=this.tree;return cE==null?0:cE.Count;},Add:function(cE,cF){return new w.New$1(bf.Add(bh.New(cE,cF),this.tree));},get_Tree:function(){return this.tree;},GetHashCode:function(){return M.Hash(_0.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();},CompareTo0:function(cE){return x.compareWith(M.Compare,this,cE);}},o,w);w.New=cy.Ctor(function(cE){w.New$1.call(this,R.fromSeq(cE));},w);w.New$1=cy.Ctor(function(cE){o.New.call(this);this.tree=cE;},w);x.delay=function(cE){return{GetEnumerator:function(){return T.Get(cE());}};};x.map=function(cE,cF){return{GetEnumerator:function(){var cG;cG=T.Get(cF);return new U.New(null,null,function(cH){return cG.MoveNext()&&(cH.c=cE(cG.Current()),true);},function(){cG.Dispose();});}};};x.collect=function(cE,cF){return x.concat(x.map(cE,cF));};x.distinctBy=function(cE,cF){return{GetEnumerator:function(){var cG,cH;cG=T.Get(cF);cH=new bx.New$3();return new U.New(null,null,function(cI){var cJ,cK;if(cG.MoveNext()){cJ=cG.Current();cK=cH.Add(cE(cJ));while(!cK&&cG.MoveNext()){cJ=cG.Current();cK=cH.Add(cE(cJ));}return cK&&(cI.c=cJ,true);}else return false;},function(){cG.Dispose();});}};};x.iter=function(cE,cF){var cG;cG=T.Get(cF);try{while(cG.MoveNext())cE(cG.Current());}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};x.head=function(cE){var cF;cF=T.Get(cE);try{return cF.MoveNext()?cF.Current():x.insufficient();}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}};x.fold=function(cE,cF,cG){var cH,cI;cH=cF;cI=T.Get(cG);try{while(cI.MoveNext())cH=cE(cH,cI.Current());return cH;}finally{if(typeof cI=="object"&&"Dispose"in cI)cI.Dispose();}};x.concat=function(cE){return{GetEnumerator:function(){var cF;cF=T.Get(cE);return new U.New(null,null,function(cG){var cH;while(true){cH=cG.s;if(M.Equals(cH,null)){if(cF.MoveNext()){cG.s=T.Get(cF.Current());cG=cG;}else{cF.Dispose();return false;}}else if(cH.MoveNext()){cG.c=cH.Current();return true;}else{cG.Dispose();cG.s=null;cG=cG;}}},function(cG){var cH;cH=cG.s;!M.Equals(cH,null)?cH.Dispose():void 0;!M.Equals(cF,null)?cF.Dispose():void 0;});}};};x.tryPick=function(cE,cF){var cG,cH;cG=T.Get(cF);try{cH=null;while(M.Equals(cH,null)&&cG.MoveNext())cH=cE(cG.Current());return cH;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};x.iteri=function(cE,cF){var cG,cH;cG=0;cH=T.Get(cF);try{while(cH.MoveNext()){cE(cG,cH.Current());cG=cG+1;}}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}};x.append=function(cE,cF){return{GetEnumerator:function(){var cG,cH;cG=T.Get(cE);cH=[true];return new U.New(cG,null,function(cI){var cJ;return cI.s.MoveNext()?(cI.c=cI.s.Current(),true):(cJ=cI.s,!M.Equals(cJ,null)?cJ.Dispose():void 0,cI.s=null,cH[0]&&(cH[0]=false,cI.s=T.Get(cF),cI.s.MoveNext()?(cI.c=cI.s.Current(),true):(cI.s.Dispose(),cI.s=null,false)));},function(cI){var cJ;cJ=cI.s;!M.Equals(cJ,null)?cJ.Dispose():void 0;});}};};x.indexed=function(cE){return x.mapi(function(cF,cG){return[cF,cG];},cE);};x.tryFindIndex=function(cE,cF){var cG,cH,cI;cG=T.Get(cF);try{cH=true;cI=0;while(cH&&cG.MoveNext())if(cE(cG.Current()))cH=false;else cI=cI+1;return cH?null:{$:1,$0:cI};}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};x.mapi=function(cE,cF){return x.map2(cE,x.initInfinite(a.id),cF);};x.forall2=function(cE,cF,cG){return!x.exists2(function(cH,cI){return!cE(cH,cI);},cF,cG);};x.map2=function(cE,cF,cG){return{GetEnumerator:function(){var cH,cI;cH=T.Get(cF);cI=T.Get(cG);return new U.New(null,null,function(cJ){return cH.MoveNext()&&cI.MoveNext()&&(cJ.c=cE(cH.Current(),cI.Current()),true);},function(){cH.Dispose();cI.Dispose();});}};};x.initInfinite=function(cE){return{GetEnumerator:function(){return new U.New(0,null,function(cF){cF.c=cE(cF.s);cF.s=cF.s+1;return true;},void 0);}};};x.exists2=function(cE,cF,cG){var cH,cI,cJ,cK;cH=T.Get(cF);try{cJ=T.Get(cG);try{cK=false;while(!cK&&cH.MoveNext()&&cJ.MoveNext())cK=cE(cH.Current(),cJ.Current());cI=cK;}finally{if(typeof cJ=="object"&&"Dispose"in cJ)cJ.Dispose();}return cI;}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}};x.compareWith=function(cE,cF,cG){var cH,cI,cJ,cK,cL;cH=T.Get(cF);try{cJ=T.Get(cG);try{cK=0;cL=true;while(cL&&cK===0)if(cH.MoveNext())cK=cJ.MoveNext()?cE(cH.Current(),cJ.Current()):1;else if(cJ.MoveNext())cK=-1;else cL=false;cI=cK;}finally{if(typeof cJ=="object"&&"Dispose"in cJ)cJ.Dispose();}return cI;}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}};x.unfold=function(cE,cF){return{GetEnumerator:function(){return new U.New(cF,null,function(cG){var cH;cH=cE(cG.s);return cH==null?false:(cG.c=cH.$0[0],cG.s=cH.$0[1],true);},void 0);}};};x.max=function(cE){var cF,cG,cH;cF=T.Get(cE);try{if(!cF.MoveNext())x.seqEmpty();cG=cF.Current();while(cF.MoveNext()){cH=cF.Current();M.Compare(cH,cG)===1?cG=cH:void 0;}return cG;}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}};x.distinct=function(cE){return x.distinctBy(a.id,cE);};x.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};x.forall=function(cE,cF){return!x.exists(function(cG){return!cE(cG);},cF);};x.exists=function(cE,cF){var cG,cH;cG=T.Get(cF);try{cH=false;while(!cH&&cG.MoveNext())cH=cE(cG.Current());return cH;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}};y.TryFind=function(cE,cF){return cF.TryFind(cE);};y.Iterate=function(cE,cF){x.iter(function(cG){cE(cG.K,cG.V);},cF);};y.FoldBack=function(cE,cF,cG){return x.fold(function(cH,cI){return cE(cI.Key,cI.Value,cH);},cG,bf.Enumerate(true,cF.get_Tree()));};y.ToSeq=function(cE){return x.map(function(cF){return[cF.Key,cF.Value];},bf.Enumerate(false,cE.get_Tree()));};y.OfArray=function(cE){return new w.New$1(bf.OfSeq(x.map(function(cF){return bh.New(cF[0],cF[1]);},cE)));};z.ofObj=function(cE){return cE==null?null:{$:1,$0:cE};};A.Page=function(){V.$cctor();return V.Page$1;};B.Page=function(){V.$cctor();return V.Page;};C.Page=function(){V.$cctor();return V.Page$2;};C.PersonRow=function(cE,cF,cG,cH){var cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU;return(cI=(cJ=bj.DisabledWhenRefreshing(cF),(cK=(cL=(cM=bj.DisabledWhenRefreshing(cF),(cN=(cO=(cP=(cQ=(cR=(cS=new bp.New$1(),(cS.h.push({$:2,$0:"firstname",$1:Y.Map(function(cV){return cV.firstName;},cH)}),cS)),(cR.h.push({$:2,$0:"lastname",$1:Y.Map(function(cV){return cV.lastName;},cH)}),cR)),(cQ.h.push({$:2,$0:"born",$1:Y.Map(function(cV){var cW;cW=cV.born;return(new a.Date(cW)).toLocaleDateString();},cH)}),cQ)),(cP.h.push({$:2,$0:"died",$1:Y.Map(function(cV){var cW;cW=cV.died;return cW!=null&&cW.$==1?(new a.Date(cW.$0)).toLocaleDateString():"";},cH)}),cP)),(cO.h.push(bq.EventQ2(cO.k,"edit",function(){return cO.i;},function(){cE({$:0,$0:{$:2,$0:cG}});})),cO)),(cN.h.push({$:3,$0:"editattr",$1:cM}),cN))),(cL.h.push(bq.EventQ2(cL.k,"delete",function(){return cL.i;},function(){cE({$:5,$0:cG});})),cL)),(cK.h.push({$:3,$0:"deleteattr",$1:cJ}),cK))),(cT=bq.CompleteHoles(cI.k,cI.h,[]),(cU=new bo.New(cT[1],n.row(cT[0])),cI.i=cU,cU))).get_Doc();};E=D.Var=cy.Class({},o,E);E.New=cy.Ctor(function(){o.New.call(this);},E);g.New=function(cE,cF,cG,cH,cI){return{Init:cE,Var:cF,View:cG,Update:cH,Render:cI};};F.$cctor=function(){F.$cctor=a.ignore;F.router=m.r$2();};H.LoadLocalTemplates=function(cE){!H.LocalTemplatesLoaded()?(H.set_LocalTemplatesLoaded(true),H.LoadNestedTemplates(self.document.body,"")):void 0;H.LoadedTemplates().set_Item(cE,H.LoadedTemplateFile(""));};H.LocalTemplatesLoaded=function(){bw.$cctor();return bw.LocalTemplatesLoaded;};H.set_LocalTemplatesLoaded=function(cE){bw.$cctor();bw.LocalTemplatesLoaded=cE;};H.LoadNestedTemplates=function(cE,cF){var cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT;function cG(cU){var cV,cW;if(!cH.ContainsKey(cU)){cV=(cW=null,[cI.TryGetValue(cU,{get:function(){return cW;},set:function(cX){cW=cX;}}),cW]);cV[0]?(cT.Add(cU),cI.Remove(cU),H.PrepareTemplateStrict(cF,{$:1,$0:cU},cV[1],{$:1,$0:cG})):cw.warn(cT.Contains(cU)?"Encountered loop when instantiating "+cU:"Local template does not exist: "+cU);}}cH=H.LoadedTemplateFile(cF);cI=new _4.New$5();cJ=cE.querySelectorAll("[ws-template]");for(cK=0,cL=cJ.length-1;cK<=cL;cK++){cM=cJ[cK];cN=cM.getAttribute("ws-template").toLowerCase();cM.removeAttribute("ws-template");cI.set_Item(cN,H.FakeRootSingle(cM));}cO=cE.querySelectorAll("[ws-children-template]");for(cP=0,cQ=cO.length-1;cP<=cQ;cP++){cR=cO[cP];cS=cR.getAttribute("ws-children-template").toLowerCase();cR.removeAttribute("ws-children-template");cI.set_Item(cS,H.FakeRoot(cR));}cT=new bx.New$3();while(cI.count>0)cG(x.head(cI.get_Keys()));};H.LoadedTemplates=function(){bw.$cctor();return bw.LoadedTemplates;};H.LoadedTemplateFile=function(cE){var cF,cG,cH;cF=(cG=null,[H.LoadedTemplates().TryGetValue(cE,{get:function(){return cG;},set:function(cI){cG=cI;}}),cG]);return cF[0]?cF[1]:(cH=new _4.New$5(),(H.LoadedTemplates().set_Item(cE,cH),cH));};H.FakeRootSingle=function(cE){var cF,cG,cH,cI;cE.removeAttribute("ws-template");cF=cE.getAttribute("ws-replace");cF===null?void 0:(cE.removeAttribute("ws-replace"),cG=cE.parentNode,M.Equals(cG,null)?void 0:(cH=self.document.createElement(cE.tagName),cH.setAttribute("ws-replace",cF),cG.replaceChild(cH,cE)));cI=self.document.createElement("div");cI.appendChild(cE);return cI;};H.FakeRoot=function(cE){var cF;cF=self.document.createElement("div");while(cE.hasChildNodes())cF.appendChild(cE.firstChild);return cF;};H.PrepareTemplateStrict=function(cE,cF,cG,cH){var cI;function cJ(cO,cP){var cQ,cR,cS,cT,cU,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de;function cV(df){}while(true)switch(cO){case 0:if(cP!==null){cQ=cP.nextSibling;if(M.Equals(cP.nodeType,_3.TEXT_NODE))bS.convertTextNode(cP);else if(M.Equals(cP.nodeType,_3.ELEMENT_NODE))cL(cP);cP=cQ;}else return null;break;case 1:cW=bT.string(cP.nodeName,{$:1,$0:3},null).toLowerCase();cX=(cR=cW.indexOf("."),cR===-1?[cE,cW]:[bT.string(cW,null,{$:1,$0:cR-1}),bT.string(cW,{$:1,$0:cR+1},null)]);cY=cX[1];cZ=cX[0];if(cZ!==""&&!H.LoadedTemplates().ContainsKey(cZ))return bS.failNotLoaded(cY);else{if(cZ===""&&cH!=null)cH.$0(cY);c0=H.LoadedTemplates().get_Item(cZ);if(!c0.ContainsKey(cY))return bS.failNotLoaded(cY);else{c1=c0.get_Item(cY);c2=c1.cloneNode(true);c3=new bx.New$3();c4=new _4.New$5();c5=cP.attributes;for(c6=0,c7=c5.length-1;c6<=c7;c6++){c8=c5.item(c6).name.toLowerCase();c4.set_Item(c8,(c9=c5.item(c6).nodeValue,c9===""?c8:c9.toLowerCase()));!c3.Add(c8)?cw.warn("Hole mapped twice",c8):void 0;}for(c_=0,c$=cP.childNodes.length-1;c_<=c$;c_++){da=cP.childNodes[c_];M.Equals(da.nodeType,_3.ELEMENT_NODE)?!c3.Add(da.nodeName.toLowerCase())?cw.warn("Hole filled twice",cY):void 0:void 0;}db=cP.childNodes.length===1&&M.Equals(cP.firstChild.nodeType,_3.TEXT_NODE);if(db){cT=bS.fillTextHole(c2,cP.firstChild.textContent,cY);((function(df){return function(dg){if(dg!=null)df(dg.$0);};}((cU=function(df){return function(dg){return df.Add(dg);};}(c3),function(df){return cV(cU(df));})))(cT));}bS.removeHolesExcept(c2,c3);if(!db){for(dc=0,dd=cP.childNodes.length-1;dc<=dd;dc++){de=cP.childNodes[dc];M.Equals(de.nodeType,_3.ELEMENT_NODE)?de.hasAttributes()?bS.fillInstanceAttrs(c2,de):cK(c2,de):void 0;}}bS.mapHoles(c2,c4);bS.fill(c2,cP.parentNode,cP);cP.parentNode.removeChild(cP);return;}}break;}}function cK(cO,cP){var cQ,cS,cT;function cR(cU,cV){var cW;if(cS==="title"&&cP.hasChildNodes()){cW=bP.ParseHTMLIntoFakeRoot(cP.textContent);cP.removeChild(cP.firstChild);while(cW.hasChildNodes())cP.appendChild(cW.firstChild);}else null;cL(cP);return bS.fill(cP,cU,cV);}cS=cP.nodeName.toLowerCase();H.foreachNotPreserved(cO,"[ws-attr-holes]",function(cU){var cV,cW,cX,cY,cZ;cV=bJ.SplitChars(cU.getAttribute("ws-attr-holes"),[" "],1);for(cW=0,cX=cV.length-1;cW<=cX;cW++){cY=_0.get(cV,cW);cU.setAttribute(cY,(cZ=new a.RegExp("\\${"+cS+"}","ig"),cU.getAttribute(cY).replace(cZ,cP.textContent)));}});cT=cO.querySelector("[ws-hole="+cS+"]");if(M.Equals(cT,null)){cQ=cO.querySelector("[ws-replace="+cS+"]");return M.Equals(cQ,null)?null:(cR(cQ.parentNode,cQ),void cQ.parentNode.removeChild(cQ));}else{while(cT.hasChildNodes())cT.removeChild(cT.lastChild);cT.removeAttribute("ws-hole");return cR(cT,null);}}function cL(cO){if(!cO.hasAttribute("ws-preserve"))if(bJ.StartsWith(cO.nodeName.toLowerCase(),"ws-"))cN(cO);else{bS.convertAttrs(cO);cM(cO.firstChild);}}function cM(cO){return cJ(0,cO);}function cN(cO){return cJ(1,cO);}cI=(cF==null?"":cF.$0).toLowerCase();H.LoadedTemplateFile(cE).set_Item(cI,cG);cG.hasChildNodes()?(function(cO){var cP,cQ,cR,cS;while(true){cP=cO.querySelector("[ws-template]");if(M.Equals(cP,null)){cQ=cO.querySelector("[ws-children-template]");if(M.Equals(cQ,null))return null;else{cR=cQ.getAttribute("ws-children-template");cQ.removeAttribute("ws-children-template");H.PrepareTemplateStrict(cE,{$:1,$0:cR},cQ,null);cO=cO;}}else{cS=cP.getAttribute("ws-template");(H.PrepareSingleTemplate(cE,{$:1,$0:cS},cP))(null);cO=cO;}}}(cG),cM(cG.firstChild)):void 0;};H.foreachNotPreserved=function(cE,cF,cG){bP.IterSelector(cE,cF,function(cH){if(cH.closest("[ws-preserve]")==null)cG(cH);});};H.PrepareSingleTemplate=function(cE,cF,cG){var cH;cH=H.FakeRootSingle(cG);return function(cI){H.PrepareTemplateStrict(cE,cF,cH,cI);};};H.NamedTemplate=function(cE,cF,cG){var cH,cI;cH=(cI=null,[H.LoadedTemplateFile(cE).TryGetValue(cF==null?"":cF.$0,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI]);return cH[0]?H.ChildrenTemplate(cH[1].cloneNode(true),cG):(cw.warn("Local template doesn't exist",cF),I.get_Empty());};H.TextHoleRE=function(){bw.$cctor();return bw.TextHoleRE;};H.ChildrenTemplate=function(cE,cF){var cG,cH,cI,cJ,cK;cG=H.InlineTemplate(cE,x.append(cF,H.GlobalHoles().get_Values()));cH=cG[1];cI=cG[0];cJ=cI.Els;return!M.Equals(cJ,null)&&cJ.length===1&&(_0.get(cJ,0)instanceof _3&&(M.Equals(_0.get(cJ,0).nodeType,_3.ELEMENT_NODE)&&(cK=_0.get(cJ,0),true)))?_5.TreeNode(cI,cH):I.Mk({$:6,$0:cI},cH);};H.InlineTemplate=function(cE,cF){var cG,cH,cI,cJ,cM,cN,cO,cP,cQ,cR,cS;function cK(cT,cU){var cV,cW,cX;cV=bO.Insert(cT,cU);cN.push(bO.Updates(cV));cO.push([cT,cV]);cW=cy.GetOptional(cV.OnAfterRender);return cW==null?null:(cX=cW.$0,void cP.push(function(){cX(cT);}));}function cL(cT){var cU,cV;cU=(cV=null,[cQ.TryGetValue(cT,{get:function(){return cV;},set:function(cW){cV=cW;}}),cV]);return cU[0]?cU[1].$==0?{$:1,$0:cU[1].$1}:cU[1].$==1?{$:1,$0:I.TextNode(cU[1].$1)}:cU[1].$==2?{$:1,$0:I.TextView(cU[1].$1)}:cU[1].$==8?{$:1,$0:I.TextView(cU[1].$1.get_View())}:cU[1].$==9?{$:1,$0:I.TextView(Y.Map(a.String,cU[1].$1.get_View()))}:cU[1].$==10?{$:1,$0:I.TextView(Y.Map(function(cW){return cW.get_Input();},cU[1].$1.get_View()))}:cU[1].$==11?{$:1,$0:I.TextView(Y.Map(a.String,cU[1].$1.get_View()))}:cU[1].$==12?{$:1,$0:I.TextView(Y.Map(function(cW){return cW.get_Input();},cU[1].$1.get_View()))}:cU[1].$==13?{$:1,$0:I.TextView(Y.Map(a.String,cU[1].$1.get_View()))}:(cw.warn("Content hole filled with attribute data",cT),null):null;}cM=[];cN=[];cO=[];cP=[];cQ=new _4.New$5();cR=T.Get(cF);try{while(cR.MoveNext()){cS=cR.Current();cQ.set_Item(cS.$0,cS);}}finally{if(typeof cR=="object"&&"Dispose"in cR)cR.Dispose();}cG=bP.ChildrenArray(cE);H.foreachNotPreserved(cE,"[ws-hole]",function(cT){var cU,cV,cW;cW=cT.getAttribute("ws-hole");cT.removeAttribute("ws-hole");while(cT.hasChildNodes())cT.removeChild(cT.lastChild);cU=cL(cW);cU!=null&&cU.$==1?(cV=cU.$0,by.LinkElement(cT,cV.docNode),cM.push(bC.New(bO.Empty(cT),cV.docNode,null,cT,bu.Int(),null)),cN.push(cV.updates)):void 0;});H.foreachNotPreserved(cE,"[ws-replace]",function(cT){var cU,cV,cW,cX,cY,cZ;cU=cL(cT.getAttribute("ws-replace"));cU!=null&&cU.$==1?(cV=cU.$0,cW=cT.parentNode,cX=self.document.createTextNode(""),cW.replaceChild(cX,cT),cY=by.InsertBeforeDelim(cX,cV.docNode),cZ=_0.tryFindIndex(function(c0){return cT===c0;},cG),cZ==null?void 0:_0.set(cG,cZ.$0,cV.docNode),cM.push(bC.New(bO.Empty(cW),cV.docNode,{$:1,$0:[cY,cX]},cW,bu.Int(),null)),cN.push(cV.updates)):void 0;});H.foreachNotPreserved(cE,"[ws-attr]",function(cT){var cU,cV,cW;cU=cT.getAttribute("ws-attr");cT.removeAttribute("ws-attr");cV=(cW=null,[cQ.TryGetValue(cU,{get:function(){return cW;},set:function(cX){cW=cX;}}),cW]);cV[0]?cV[1].$==3?cK(cT,cV[1].$1):cw.warn("Attribute hole filled with non-attribute data",cU):void 0;});H.foreachNotPreserved(cE,"[ws-on]",function(cT){cK(cT,bD.Concat(_0.choose(function(cU){var cV,cW,cX;cV=bJ.SplitChars(cU,[":"],1);cW=(cX=null,[cQ.TryGetValue(_0.get(cV,1),{get:function(){return cX;},set:function(cY){cX=cY;}}),cX]);return cW[0]?cW[1].$==4?{$:1,$0:br.Handler(_0.get(cV,0),cW[1].$1)}:cW[1].$==5?{$:1,$0:bD.Handler(_0.get(cV,0),cW[1].$1)}:(cw.warn("Event hole on"+_0.get(cV,0)+" filled with non-event data",_0.get(cV,1)),null):null;},bJ.SplitChars(cT.getAttribute("ws-on"),[" "],1))));cT.removeAttribute("ws-on");});H.foreachNotPreserved(cE,"[ws-onafterrender]",function(cT){var cU,cV,cW;cU=cT.getAttribute("ws-onafterrender");cV=(cW=null,[cQ.TryGetValue(cU,{get:function(){return cW;},set:function(cX){cW=cX;}}),cW]);cV[0]?cV[1].$==6?(cT.removeAttribute("ws-onafterrender"),cK(cT,br.OnAfterRender(cV[1].$1))):cV[1].$==7?(cT.removeAttribute("ws-onafterrender"),cK(cT,br.OnAfterRender(cV[1].$1))):cw.warn("onafterrender hole filled with non-onafterrender data",cU):void 0;});H.foreachNotPreserved(cE,"[ws-var]",function(cT){var cU,cV,cW;cU=cT.getAttribute("ws-var");cT.removeAttribute("ws-var");cV=(cW=null,[cQ.TryGetValue(cU,{get:function(){return cW;},set:function(cX){cW=cX;}}),cW]);cV[0]?cV[1].$==8?cK(cT,br.Value(cV[1].$1)):cV[1].$==9?cK(cT,br.Checked(cV[1].$1)):cV[1].$==10?cK(cT,br.IntValue(cV[1].$1)):cV[1].$==11?cK(cT,br.IntValueUnchecked(cV[1].$1)):cV[1].$==12?cK(cT,br.FloatValue(cV[1].$1)):cV[1].$==13?cK(cT,br.FloatValueUnchecked(cV[1].$1)):cw.warn("Var hole filled with non-Var data",cU):void 0;});H.foreachNotPreserved(cE,"[ws-attr-holes]",function(cT){var cU,cV,cW,cX;cU=new a.RegExp(H.TextHoleRE(),"g");cV=bJ.SplitChars(cT.getAttribute("ws-attr-holes"),[" "],1);cT.removeAttribute("ws-attr-holes");for(cW=0,cX=cV.length-1;cW<=cX;cW++)(function(){var cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_;c7=_0.get(cV,cW);c8=cT.getAttribute(c7);cY=null;cZ=0;c9=[];while(cY=cU.exec(c8),cY!==null){c_=bT.string(c8,{$:1,$0:cZ},{$:1,$0:cU.lastIndex-_0.get(cY,0).length-1});cZ=cU.lastIndex;c9.push([c_,_0.get(cY,1)]);}c1=bT.string(c8,{$:1,$0:cZ},null);cU.lastIndex=0;c2=_0.foldBack(function(c$,da){return(function(db){var dc,dd;dc=db[0];dd=db[1];return function(de){var df,dg,dh,di,dj;df=de[0];dg=de[1];dh=(di=(dj=null,[cQ.TryGetValue(dd,{get:function(){return dj;},set:function(dk){dj=dk;}}),dj]),di[0]?di[1].$==1?{$:0,$0:di[1].$1}:di[1].$==2?{$:1,$0:di[1].$1}:di[1].$==8?{$:1,$0:di[1].$1.get_View()}:di[1].$==9?{$:1,$0:Y.Map(a.String,di[1].$1.get_View())}:di[1].$==10?{$:1,$0:Y.Map(function(dk){return dk.get_Input();},di[1].$1.get_View())}:di[1].$==11?{$:1,$0:Y.Map(a.String,di[1].$1.get_View())}:di[1].$==12?{$:1,$0:Y.Map(function(dk){return dk.get_Input();},di[1].$1.get_View())}:di[1].$==13?{$:1,$0:Y.Map(a.String,di[1].$1.get_View())}:(cw.warn("Attribute value hole filled with non-text data",dd),{$:0,$0:""}):{$:0,$0:""});return dh.$==1?[dc,new bb({$:1,$0:df===""?dh.$0:Y.Map(function(dk){return dk+df;},dh.$0),$1:dg})]:[dc+dh.$0+df,dg];};}(c$))(da);},c9,[c1,bb.Empty]);return cK(cT,c2[1].$==1?c2[1].$1.$==1?c2[1].$1.$1.$==1?c2[1].$1.$1.$1.$==0?(c3=c2[0],br.Dynamic(c7,Y.Map3(function(c$,da,db){return c3+c$+da+db;},c2[1].$0,c2[1].$1.$0,c2[1].$1.$1.$0))):(c4=c2[0],br.Dynamic(c7,Y.Map(function(c$){return c4+bJ.concat("",c$);},Y.Sequence(c2[1])))):(c5=c2[0],br.Dynamic(c7,Y.Map2(function(c$,da){return c5+c$+da;},c2[1].$0,c2[1].$1.$0))):c2[0]===""?br.Dynamic(c7,c2[1].$0):(c6=c2[0],br.Dynamic(c7,Y.Map(function(c$){return c6+c$;},c2[1].$0))):bD.Create(c7,c2[0]));}());});return[cy.DeleteEmptyFields({Els:cG,Dirty:true,Holes:cM,Attrs:cO,Render:(cH=cP.length==0?null:{$:1,$0:function(cT){_0.iter(function(cU){cU(cT);},cP);}},cH?cH.$0:void 0),El:(cI=!M.Equals(cG,null)&&cG.length===1&&(_0.get(cG,0)instanceof _3&&(_0.get(cG,0)instanceof a.Element&&(cJ=_0.get(cG,0),true)))?{$:1,$0:cJ}:null,cI?cI.$0:void 0)},["Render","El"]),b7.TreeReduce(Y.Const(),Y.Map2Unit,cN)];};H.GlobalHoles=function(){bw.$cctor();return bw.GlobalHoles;};I=D.Doc=cy.Class({},o,I);I.RunById=function(cE,cF){var cG;cG=self.document.getElementById(cE);M.Equals(cG,null)?e.FailWith("invalid id: "+cE):I.Run(cG,cF);};I.Run=function(cE,cF){by.LinkElement(cE,cF.docNode);I.RunInPlace(false,cE,cF);};I.RunInPlace=function(cE,cF,cG){var cH;cH=by.CreateRunState(cF,cG.docNode);Y.Sink(bW.get_UseAnimations()||bX.BatchUpdatesEnabled()?bY.StartProcessor(by.PerformAnimatedUpdate(cE,cH,cG.docNode)):function(){by.PerformSyncUpdate(cE,cH,cG.docNode);},cG.updates);};I.Element=function(cE,cF,cG){var cH,cI;cH=bD.Concat(cF);cI=I.Concat(cG);return _5.New(self.document.createElement(cE),cH,cI);};I.Concat=function(cE){var cF;cF=b7.ofSeqNonCopying(cE);return b7.TreeReduce(I.get_Empty(),I.Append,cF);};I.ConvertSeqBy=function(cE,cF,cG){return I.Flatten(Y.MapSeqCachedViewBy(cE,function(cH,cI){return(cF(cH))(cI);},cG));};I.Append=function(cE,cF){return I.Mk({$:0,$0:cE.docNode,$1:cF.docNode},Y.Map2Unit(cE.updates,cF.updates));};I.get_Empty=function(){return I.Mk(null,Y.Const());};I.Flatten=function(cE){return I.EmbedView(Y.Map(I.Concat,cE));};I.Mk=function(cE,cF){return new I.New(cE,cF);};I.EmbedView=function(cE){var cF;cF=by.CreateEmbedNode();return I.Mk({$:2,$0:cF},Y.Map(a.ignore,Y.Bind(function(cG){by.UpdateEmbedNode(cF,cG.docNode);return cG.updates;},cE)));};I.TextNode=function(cE){return I.Mk({$:5,$0:self.document.createTextNode(cE)},Y.Const());};I.TextView=function(cE){var cF;cF=by.CreateTextNode();return I.Mk({$:4,$0:cF},Y.Map(function(cG){by.UpdateTextNode(cF,cG);},cE));};I.New=cy.Ctor(function(cE,cF){o.New.call(this);this.docNode=cE;this.updates=cF;},I);K.NewFromSeq=function(cE){var cF,cG,cH;cF={};cG=T.Get(cE);try{while(cG.MoveNext()){cH=cG.Current();cF[cH[0]]=cH[1];}}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}return cF;};L.New=function(cE){return[cE];};M.Equals=function(cE,cF){var cG,cH,cI,cJ;if(cE===cF)return true;else{cG=typeof cE;if(cG=="object"){if(cE===null||cE===void 0||cF===null||cF===void 0)return false;else if("Equals"in cE)return cE.Equals(cF);else if(cE instanceof a.Array&&cF instanceof a.Array)return M.arrayEquals(cE,cF);else if(cE instanceof a.Date&&cF instanceof a.Date)return M.dateEquals(cE,cF);else{cH=[true];for(var cK in cE)if(function(cL){cH[0]=!cE.hasOwnProperty(cL)||cF.hasOwnProperty(cL)&&M.Equals(cE[cL],cF[cL]);return!cH[0];}(cK))break;if(cH[0]){for(var cL in cF)if(function(cM){cH[0]=!cF.hasOwnProperty(cM)||cE.hasOwnProperty(cM);return!cH[0];}(cL))break;}return cH[0];}}else return cG=="function"&&("$Func"in cE?cE.$Func===cF.$Func&&cE.$Target===cF.$Target:"$Invokes"in cE&&"$Invokes"in cF&&M.arrayEquals(cE.$Invokes,cF.$Invokes));}};M.arrayEquals=function(cE,cF){var cG,cH;if(_0.length(cE)===_0.length(cF)){cG=true;cH=0;while(cG&&cH<_0.length(cE)){!M.Equals(_0.get(cE,cH),_0.get(cF,cH))?cG=false:void 0;cH=cH+1;}return cG;}else return false;};M.dateEquals=function(cE,cF){return cE.getTime()===cF.getTime();};M.Compare=function(cE,cF){var cG,cH,cI,cJ,cK,cL;if(cE===cF)return 0;else{cH=typeof cE;switch(cH=="function"?1:cH=="boolean"?2:cH=="number"?2:cH=="string"?2:cH=="object"?3:0){case 0:return typeof cF=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return cE<cF?-1:1;case 3:if(cE===null)cI=-1;else if(cF===null)cI=1;else if("CompareTo"in cE)cI=cE.CompareTo(cF);else if("CompareTo0"in cE)cI=cE.CompareTo0(cF);else if(cE instanceof a.Array&&cF instanceof a.Array)cI=M.compareArrays(cE,cF);else if(cE instanceof a.Date&&cF instanceof a.Date)cI=M.compareDates(cE,cF);else{cJ=[0];for(var cM in cE)if(function(cN){return!cE.hasOwnProperty(cN)?false:!cF.hasOwnProperty(cN)?(cJ[0]=1,true):(cJ[0]=M.Compare(cE[cN],cF[cN]),cJ[0]!==0);}(cM))break;if(cJ[0]===0){for(var cN in cF)if(function(cO){return!cF.hasOwnProperty(cO)?false:!cE.hasOwnProperty(cO)&&(cJ[0]=-1,true);}(cN))break;}cI=cJ[0];}return cI;}}};M.Hash=function(cE){var cF;cF=typeof cE;return cF=="function"?0:cF=="boolean"?cE?1:0:cF=="number"?cE:cF=="string"?M.hashString(cE):cF=="object"?cE==null?0:cE instanceof a.Array?M.hashArray(cE):M.hashObject(cE):0;};M.compareArrays=function(cE,cF){var cG,cH;if(_0.length(cE)<_0.length(cF))return -1;else if(_0.length(cE)>_0.length(cF))return 1;else{cG=0;cH=0;while(cG===0&&cH<_0.length(cE)){cG=M.Compare(_0.get(cE,cH),_0.get(cF,cH));cH=cH+1;}return cG;}};M.compareDates=function(cE,cF){return M.Compare(cE.getTime(),cF.getTime());};M.hashString=function(cE){var cF,cG,cH;if(cE===null)return 0;else{cF=5381;for(cG=0,cH=cE.length-1;cG<=cH;cG++)cF=M.hashMix(cF,cE[cG].charCodeAt());return cF;}};M.hashArray=function(cE){var cF,cG,cH;cF=-34948909;for(cG=0,cH=_0.length(cE)-1;cG<=cH;cG++)cF=M.hashMix(cF,M.Hash(_0.get(cE,cG)));return cF;};M.hashObject=function(cE){var cF,cG;if("GetHashCode"in cE)return cE.GetHashCode();else{cF=[0];for(var cH in cE)if(function(cI){cF[0]=M.hashMix(M.hashMix(cF[0],M.hashString(cI)),M.Hash(cE[cI]));return false;}(cH))break;return cF[0];}};M.hashMix=function(cE,cF){return(cE<<5)+cE+cF;};N.Create=function(cE){return _9.New(false,cE,N.forceLazy);};N.Force=function(cE){return cE.f();};N.forceLazy=function(){var cE;cE=this.v();this.c=true;this.v=cE;this.f=N.cachedLazy;return cE;};N.cachedLazy=function(){return this.v;};N.CreateFromValue=function(cE){return _9.New(true,cE,N.cachedLazy);};O.AsAsync=function(cE){return bc.FromContinuations(function(cF,cG){cE.then(cF,function(cH){return cG(O.unwrapExn(cH));});});};O.unwrapExn=function(cE){return cE instanceof bF?cE:new bG.New(cE);};Q.FetchWith=function(cE,cF,cG,cH){var cI,cJ,cK,cL,cM,cN,cO;cI=cF?cF:{};cJ=Q.Write(cG,cH);return cJ!=null&&cJ.$==1?(cK=cJ.$0,(cI.method=(cL=cK.Method,cL==null?"POST":cL.$0),cM=cK.Body.f(),cM===null?!cK.FormData.get_IsEmpty()?(cN=new a.FormData(),y.Iterate(function(cP,cQ){return cN.append(cP,cQ);},cK.FormData),cI.body=cN):void 0:cI.body=cM,cO=cK.ToLink(),self.fetch(cE==null?cO:bJ.TrimEnd(cE.$0,["/"])+cO,cI))):e.FailWith("Failed to map endpoint to request");};Q.Write=function(cE,cF){var cG;cG=cE.Write(cF);return cG==null?null:{$:1,$0:bd.Combine(cG.$0)};};Q.Parse=function(cE,cF){function cG(cH,cI){return cH.Segments.$==0?{$:1,$0:cI}:null;}return x.tryPick(function(cH){return cG(cH[0],cH[1]);},cE.Parse(cF));};Q.HashLink=function(cE,cF){return"#"+Q.Link(cE,cF);};Q.Link=function(cE,cF){var cG;cG=Q.Write(cE,cF);return cG==null?"":cG.$0.ToLink();};Q.Body=function(cE,cF){return bH.New$1(function(cG){var cH,cI;cH=cG.Body.f();return cH===null?[]:(cI=cE(cH),cI!=null&&cI.$==1?[[bd.New(cG.Segments,cG.QueryArgs,cG.FormData,cG.Method,N.CreateFromValue(null)),cI.$0]]:[]);},function(cG){var cH;return{$:1,$0:[(cH=bd.get_Empty(),bd.New(cH.Segments,cH.QueryArgs,cH.FormData,cH.Method,N.CreateFromValue(cF(cG))))]};});};R.fromSeq=function(cE){var cF;cF=_0.ofSeq(x.delay(function(){return x.collect(function(cG){return[bh.New(cG[0],cG[1])];},x.distinctBy(function(cG){return cG[0];},cE));}));_0.sortInPlace(cF);return bf.Build(cF,0,cF.length-1);};S.ofSeq=function(cE){var cF,cG,cH,cI,cJ,cK;if(cE instanceof bb)return cE;else if(cE instanceof a.Array)return S.ofArray(cE);else{cF=T.Get(cE);try{cH=cF.MoveNext();if(!cH)cG=bb.Empty;else{cJ=new bb({$:1});cI=cJ;while(cH){cI.$0=cF.Current();cF.MoveNext()?cI=(cK=new bb({$:1}),cI.$1=cK,cK):cH=false;}cI.$1=bb.Empty;cG=cJ;}return cG;}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}}};S.ofArray=function(cE){var cF,cG,cH;cF=bb.Empty;for(cG=_0.length(cE)-1,cH=0;cG>=cH;cG--)cF=new bb({$:1,$0:_0.get(cE,cG),$1:cF});return cF;};S.append=function(cE,cF){var cG,cH,cI,cJ,cK;if(cE.$==0)return cF;else if(cF.$==0)return cE;else{cJ=new bb({$:1});cG=cJ;cH=cE;cI=true;while(cI){cG.$0=cH.$0;cH=cH.$1;cH.$==0?cI=false:cG=(cK=new bb({$:1}),cG.$1=cK,cK);}cG.$1=cF;return cJ;}};S.rev=function(cE){var cF,cG;cF=bb.Empty;cG=cE;while(cG.$==1){cF=new bb({$:1,$0:cG.$0,$1:cF});cG=cG.$1;}return cF;};S.iter=function(cE,cF){var cG;cG=cF;while(cG.$==1){cE(S.head(cG));cG=S.tail(cG);}};S.head=function(cE){return cE.$==1?cE.$0:S.listEmpty();};S.tail=function(cE){return cE.$==1?cE.$1:S.listEmpty();};S.listEmpty=function(){return e.FailWith("The input list was empty.");};T.Get=function(cE){return cE instanceof a.Array?T.ArrayEnumerator(cE):M.Equals(typeof cE,"string")?T.StringEnumerator(cE):cE.GetEnumerator();};T.ArrayEnumerator=function(cE){return new U.New(0,null,function(cF){var cG;cG=cF.s;return cG<_0.length(cE)&&(cF.c=_0.get(cE,cG),cF.s=cG+1,true);},void 0);};T.StringEnumerator=function(cE){return new U.New(0,null,function(cF){var cG;cG=cF.s;return cG<cE.length&&(cF.c=cE[cG],cF.s=cG+1,true);},void 0);};T.Get0=function(cE){return cE instanceof a.Array?T.ArrayEnumerator(cE):M.Equals(typeof cE,"string")?T.StringEnumerator(cE):"GetEnumerator0"in cE?cE.GetEnumerator0():cE.GetEnumerator();};U=T.T=cy.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},o,U);U.New=cy.Ctor(function(cE,cF,cG,cH){o.New.call(this);this.s=cE;this.c=cF;this.n=cG;this.d=cH;},U);V.$cctor=function(){V.$cctor=a.ignore;V.Page=ba.Create(function(cE,cF,cG){return bj.EditForm(cF,cG,bk.New("Edit",{$:4,$0:cE}));},null,null,null);V.Page$1=ba.Single(function(cE){return function(cF){return bj.EditForm(cE,cF,bk.New("Create",{$:3}));};},null,null,null);V.Page$2=ba.Single(function(cE){return function(cF){var cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW;function cX(cY,cZ){return C.PersonRow(cE,cF,cY,cZ);}return(cG=(cH=(cI=bj.DisabledWhenRefreshing(cF),(cJ=(cK=(cL=br.DynamicClassPred("is-active",Y.Map(function(cY){return cY.Deleting!=null;},cF)),(cM=(cN=bj.DisabledWhenRefreshing(cF),(cO=(cP=(cQ=bj.DisabledWhenRefreshing(cF),(cR=(cS=(cT=I.ConvertSeqBy(function(cY){return cY.K;},function(cY){return function(cZ){return cX(cY,Y.Map(function(c0){return c0.V;},cZ));};},Y.Map(function(cY){return cY.People;},cF)),(cU=new bp.New$1(),(cU.h.push({$:0,$0:"body",$1:cT}),cU))),(cS.h.push(bq.EventQ2(cS.k,"create",function(){return cS.i;},function(){cE({$:0,$0:{$:1}});})),cS)),(cR.h.push({$:3,$0:"createattr",$1:cQ}),cR))),(cP.h.push(bq.EventQ2(cP.k,"refresh",function(){return cP.i;},function(){cE({$:2,$0:false});})),cP)),(cO.h.push({$:3,$0:"refreshattr",$1:cN}),cO))),(cM.h.push({$:3,$0:"deletemodalattr",$1:cL}),cM))),(cK.h.push(bq.EventQ2(cK.k,"deleteconfirm",function(){return cK.i;},function(){cE({$:6});})),cK)),(cJ.h.push({$:3,$0:"deleteconfirmattr",$1:cI}),cJ))),(cH.h.push(bq.EventQ2(cH.k,"deletecancel",function(){return cH.i;},function(){cE({$:7});})),cH)),(cV=bq.CompleteHoles(cG.k,cG.h,[]),(cW=new bo.New(cV[1],n.table(cV[0])),cG.i=cW,cW))).get_Doc();};},null,null,null);};W.InstallHashInto=function(cE,cF,cG){function cH(cK){return Q.Parse(cG,bd.FromHash(cK,{$:1,$0:true}));}function cI(){return W.getCurrentHash(cH,cF);}function cJ(cK){if(!M.Equals(cE.Get(),cK))cE.Set(cK);}cJ(cI());self.addEventListener("popstate",function(){return cJ(cI());},false);self.addEventListener("hashchange",function(){return cJ(cI());},false);self.document.body.addEventListener("click",function(cK){var cL,cM,cN;cL=(cM=W.findLinkHref(cK.target),cM==null?null:(cN=cM.$0,bJ.StartsWith(cN,"#")?cH(cN):null));return cL==null?null:(cJ(cL.$0),cK.preventDefault());},false);Y.Sink(function(cK){var cL;if(!M.Equals(cK,cI())){cL=Q.HashLink(cG,cK);self.history.pushState(null,null,cL);}},cE.get_View());};W.getCurrentHash=function(cE,cF){var cG,cH;cG=self.location.hash;cH=cE(cG);return cH==null?((function(cI){return function(cJ){return cI("Failed to parse route: "+bi.toSafe(cJ));};}(function(cI){cw.log(cI);}))(cG),cF):cH.$0;};W.findLinkHref=function(cE){while(true)if(cE.tagName==="A")return z.ofObj(cE.getAttribute("href"));else if(cE===self.document.body)return null;else cE=cE.parentNode;};X=D.Var$1=cy.Class({},o,X);X.Lens=function(cE,cF,cG){var cH,cI,cJ;cH=bu.Id();cI=Y.Map(cF,cE.get_View());cJ=new E({Get:function(){return cF(cE.Get());},Set:function(cK){return cE.Update(function(cL){return cG(cL,cK);});},SetFinal:function(cK){return this.Set(cK);},Update:function(cK){return cE.Update(function(cL){return cG(cL,cK(cF(cL)));});},UpdateMaybe:function(cK){return cE.UpdateMaybe(function(cL){var cM;cM=cK(cF(cL));return cM==null?null:{$:1,$0:cG(cL,cM.$0)};});},get_View:function(){return cI;},get_Id:function(){return cH;}});E.New.call(cJ);return cJ;};X.Create$1=function(cE){return new bz.New(false,bA.New({$:2,$0:cE,$1:[]}),cE);};X.Set=function(cE,cF){cE.Set(cF);};Y=D.View=cy.Class({},null,Y);Z.GetFieldValues=function(cE){var cF,cG;cF=[];for(var cH in cE)cF.push(cE[cH]);return cF;};_0.get=function(cE,cF){_0.checkBounds(cE,cF);return cE[cF];};d.checkThis=function(cE){return M.Equals(cE,null)?e.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):cE;};_0.checkBounds=function(cE,cF){if(cF<0||cF>=cE.length)e.FailWith("Index was outside the bounds of the array.");};_0.length=function(cE){return cE.dims===2?cE.length*cE.length:cE.length;};_0.set=function(cE,cF,cG){_0.checkBounds(cE,cF);cE[cF]=cG;};_0.iter=function(cE,cF){var cG,cH;for(cG=0,cH=cF.length-1;cG<=cH;cG++)cE(cF[cG]);};_0.map=function(cE,cF){var cG,cH,cI;cG=new a.Array(cF.length);for(cH=0,cI=cF.length-1;cH<=cI;cH++)cG[cH]=cE(cF[cH]);return cG;};_0.sortInPlace=function(cE){_0.mapInPlace(function(cF){return cF[0];},_0.mapiInPlace(function(cF,cG){return[cG,cF];},cE).sort(M.Compare));};_0.filter=function(cE,cF){var cG,cH,cI;cG=[];for(cH=0,cI=cF.length-1;cH<=cI;cH++)if(cE(cF[cH]))cG.push(cF[cH]);return cG;};_0.ofSeq=function(cE){var cF,cG;if(cE instanceof a.Array)return cE.slice();else if(cE instanceof bb)return _0.ofList(cE);else{cF=[];cG=T.Get(cE);try{while(cG.MoveNext())cF.push(cG.Current());return cF;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}}};_0.ofList=function(cE){var cF,cG;cG=[];cF=cE;while(!(cF.$==0)){cG.push(S.head(cF));cF=S.tail(cF);}return cG;};_0.map2=function(cE,cF,cG){var cH,cI,cJ;_0.checkLength(cF,cG);cH=new a.Array(cG.length);for(cI=0,cJ=cG.length-1;cI<=cJ;cI++)cH[cI]=cE(cF[cI],cG[cI]);return cH;};_0.forall=function(cE,cF){var cG,cH,cI,cJ;cG=true;cH=0;cJ=_0.length(cF);while(cG&&cH<cJ)if(cE(cF[cH]))cH=cH+1;else cG=false;return cG;};_0.init=function(cE,cF){var cG,cH,cI;cE<0?e.FailWith("Negative size given."):null;cG=new a.Array(cE);for(cH=0,cI=cE-1;cH<=cI;cH++)cG[cH]=cF(cH);return cG;};_0.exists=function(cE,cF){var cG,cH,cI,cJ;cG=false;cH=0;cJ=_0.length(cF);while(!cG&&cH<cJ)if(cE(cF[cH]))cG=true;else cH=cH+1;return cG;};_0.tryPick=function(cE,cF){var cG,cH,cI;cG=null;cH=0;while(cH<cF.length&&cG==null){cI=cE(cF[cH]);cI!=null&&cI.$==1?cG=cI:void 0;cH=cH+1;}return cG;};_0.tryFindIndex=function(cE,cF){var cG,cH;cG=null;cH=0;while(cH<cF.length&&cG==null){cE(cF[cH])?cG={$:1,$0:cH}:void 0;cH=cH+1;}return cG;};_0.choose=function(cE,cF){var cG,cH,cI,cJ;cG=[];for(cH=0,cI=cF.length-1;cH<=cI;cH++){cJ=cE(cF[cH]);cJ==null?void 0:cG.push(cJ.$0);}return cG;};_0.checkLength=function(cE,cF){if(cE.length!==cF.length)e.FailWith("The arrays have different lengths.");};_0.foldBack=function(cE,cF,cG){var cH,cI,cJ,cK,cL;cH=cG;cJ=cF.length;for(cK=1,cL=cJ;cK<=cL;cK++)cH=cE(cF[cJ-cK],cH);return cH;};_0.pick=function(cE,cF){var cG;cG=_0.tryPick(cE,cF);return cG==null?e.FailWith("KeyNotFoundException"):cG.$0;};_0.concat=function(cE){return a.Array.prototype.concat.apply([],_0.ofSeq(cE));};_0.create=function(cE,cF){var cG,cH,cI;cG=new a.Array(cE);for(cH=0,cI=cE-1;cH<=cI;cH++)cG[cH]=cF;return cG;};_4=v.Dictionary=cy.Class({set_Item:function(cE,cF){this.set(cE,cF);},ContainsKey:function(cE){var cF,cG;cF=this;cG=this.data[this.hash(cE)];return cG==null?false:_0.exists(function(cH){return cF.equals.apply(null,[(e.KeyValue(cH))[0],cE]);},cG);},TryGetValue:function(cE,cF){var cG,cH,cI;cG=this;cH=this.data[this.hash(cE)];return cH==null?false:(cI=_0.tryPick(function(cJ){var cK;cK=e.KeyValue(cJ);return cG.equals.apply(null,[cK[0],cE])?{$:1,$0:cK[1]}:null;},cH),cI!=null&&cI.$==1&&(cF.set(cI.$0),true));},Remove:function(cE){return this.remove(cE);},get_Keys:function(){return new bU.New(this);},set:function(cE,cF){var cG,cH,cI,cJ;cG=this;cH=this.hash(cE);cI=this.data[cH];cI==null?(this.count=this.count+1,this.data[cH]=new a.Array({K:cE,V:cF})):(cJ=_0.tryFindIndex(function(cK){return cG.equals.apply(null,[(e.KeyValue(cK))[0],cE]);},cI),cJ==null?(this.count=this.count+1,cI.push({K:cE,V:cF})):cI[cJ.$0]={K:cE,V:cF});},remove:function(cE){var cF,cG,cH,cI;cF=this;cG=this.hash(cE);cH=this.data[cG];return cH==null?false:(cI=_0.filter(function(cJ){return!cF.equals.apply(null,[(e.KeyValue(cJ))[0],cE]);},cH),_0.length(cI)<cH.length&&(this.count=this.count-1,this.data[cG]=cI,true));},get_Item:function(cE){return this.get(cE);},get:function(cE){var cF,cG;cF=this;cG=this.data[this.hash(cE)];return cG==null?bR.notPresent():_0.pick(function(cH){var cI;cI=e.KeyValue(cH);return cF.equals.apply(null,[cI[0],cE])?{$:1,$0:cI[1]}:null;},cG);},get_Values:function(){return new cs.New(this);},GetEnumerator:function(){return T.Get0(this);},GetEnumerator0:function(){return T.Get0(_0.concat(Z.GetFieldValues(this.data)));}},o,_4);_4.New$5=cy.Ctor(function(){_4.New$6.call(this,[],M.Equals,M.Hash);},_4);_4.New$6=cy.Ctor(function(cE,cF,cG){var cH,cI;o.New.call(this);this.equals=cF;this.hash=cG;this.count=0;this.data=[];cH=T.Get(cE);try{while(cH.MoveNext()){cI=cH.Current();this.set(cI.K,cI.V);}}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}},_4);_5=D.Elt=cy.Class({ToUpdater:function(){var cE,cF,cG;return new _6.New((cE=this.docNode$1,cE!=null&&cE.$==1?cy.DeleteEmptyFields({Els:[this.elt],Dirty:true,Holes:[],Attrs:[[this.elt,cE.$0.Attr]],Render:(cF=null,cF?cF.$0:void 0),El:(cG={$:1,$0:this.elt},cG?cG.$0:void 0)},["Render","El"]):cE!=null&&cE.$==6?cE.$0:e.FailWith("Invalid docNode in Elt")),this.updates$1,this.elt,this.rvUpdates,X.Create$1([]));}},I,_5);_5.New=function(cE,cF,cG){var cH,cI;cH=by.CreateElemNode(cE,cF,cG.docNode);cI=bB.Create(cG.updates);return new _5.New$1({$:1,$0:cH},Y.Map2Unit(bO.Updates(cH.Attr),cI.v),cE,cI);};_5.TreeNode=function(cE,cF){var cG,cH;function cI(cJ){return cJ[1];}cG=bB.Create(cF);return new _5.New$1({$:6,$0:cE},Y.Map2Unit((cH=_0.map(function(cJ){return bO.Updates(cI(cJ));},cE.Attrs),b7.TreeReduce(Y.Const(),Y.Map2Unit,cH)),cG.v),_0.get(cE.Els,0),cG);};_5.New$1=cy.Ctor(function(cE,cF,cG,cH){I.New.call(this,cE,cF);this.docNode$1=cE;this.updates$1=cF;this.elt=cG;this.rvUpdates=cH;},_5);_6=G.EltUpdater=cy.Class({RemoveUpdated:function(cE){var cF,cG;function cH(cI){return cI!==cG;}cF=cE.docNode;cF!=null&&cF.$==1?(cG=cF.$0.ElKey,this.treeNode.Holes=_0.filter(function(cI){return cI.ElKey!==cG;},this.treeNode.Holes),this.holeUpdates.Set(_0.filter(function(cI){return cH(cI[0]);},this.holeUpdates.Get()))):e.FailWith("DocUpdater.RemoveUpdated expects a single element node");},AddUpdated:function(cE){var cF,cG,cH;cF=cE.docNode;cF!=null&&cF.$==1?(cG=cF.$0,this.treeNode.Holes=this.treeNode.Holes.concat([cG]),cH=this.holeUpdates.Get(),cH.push([cG.ElKey,cE.updates]),this.holeUpdates.Set(cH)):e.FailWith("DocUpdater.AddUpdated expects a single element node");}},_5,_6);_6.New=cy.Ctor(function(cE,cF,cG,cH,cI){var cJ,cK,cL,cM;function cN(cO){return cO[1];}_5.New$1.call(this,{$:6,$0:cE},Y.Map2Unit(cF,(cJ=cI.get_View(),Y.BindInner((cK=function(cO){return _0.map(cN,cO);},(cL=(cM=Y.Const(),function(cO){return b7.TreeReduce(cM,Y.Map2Unit,cO);}),function(cO){return cL(cK(cO));})),cJ))),cG,cH);this.treeNode=cE;this.holeUpdates=cI;this.origHoles=this.treeNode.Holes;},_6);_7.TryParseInt32=function(cE,cF){return _7.TryParse(cE,-2147483648,2147483647,cF);};_9.New=function(cE,cF,cG){return{c:cE,v:cF,f:cG};};$=_.attr=cy.Class({},o,$);ba.Create=function(cE,cF,cG,cH){return ba.Reactive(a.id,cE,cF,cG,cH);};ba.Single=function(cE,cF,cG,cH){return ba.Reactive(a.ignore,function(cI,cJ,cK){return((function(){return cE;}(cI))(cJ))(cK);},cF,cG,cH);};ba.Reactive=function(cE,cF,cG,cH,cI){var cJ;function cK(cL,cM,cN,cO){var cP,cQ,cR,cS,cT;cP=cE(cL);cQ=(cR=null,[cJ.TryGetValue(cP,{get:function(){return cR;},set:function(cU){cR=cU;}}),cR]);return cQ[0]?(X.Set(cQ[1][0],cL),cQ[1][1]):(cS=X.Create$1(cL),(cT=I.Element("div",[bD.Create("class","ws-page"),cG==null?bO.EmptyAttr():bD.Concat(cG.$0),br.Handler("transitionend",function(cU){return function(){return cM.RemoveIfNeeded(cU);};})],[cF(cP,cN,cO)]),(cJ.set_Item(cP,[cS,cT]),cT)));}cJ=new _4.New$5();return function(cL){return ba.New(cy.Curried(cK,3,[cL]),cH==null?false:cH.$0,cI==null?false:cI.$0);};};ba.New=function(cE,cF,cG){return{Render:cE,KeepInDom:cF,UsesTransition:cG};};bb=S.T=cy.Class({GetEnumerator:function(){return new U.New(this,null,function(cE){var cF;cF=cE.s;return cF.$==0?false:(cE.c=cF.$0,cE.s=cF.$1,true);},void 0);},GetEnumerator0:function(){return T.Get(this);}},null,bb);bb.Empty=new bb({$:0});bc.Delay=function(cE){return function(cF){try{(cE(null))(cF);}catch(cG){cF.k({$:1,$0:cG});}};};bc.TryWith=function(cE,cF){return function(cG){cE(bE.New(function(cH){if(cH.$==0)cG.k({$:0,$0:cH.$0});else if(cH.$==1)try{(cF(cH.$0))(cG);}catch(cI){cG.k(cH);}else cG.k(cH);},cG.ct));};};bc.Bind=function(cE,cF){return bc.checkCancel(function(cG){cE(bE.New(function(cH){var cI;if(cH.$==0){cI=cH.$0;bc.scheduler().Fork(function(){try{(cF(cI))(cG);}catch(cJ){cG.k({$:1,$0:cJ});}});}else bc.scheduler().Fork(function(){cG.k(cH);});},cG.ct));});};bc.Sleep=function(cE){return function(cF){var cG,cH;cG=void 0;cH=void 0;cG=a.setTimeout(function(){cH.Dispose();bc.scheduler().Fork(function(){cF.k({$:0,$0:null});});},cE);cH=bc.Register(cF.ct,function(){a.clearTimeout(cG);bc.scheduler().Fork(function(){bc.cancel(cF);});});};};bc.Zero=function(){bK.$cctor();return bK.Zero;};bc.Start=function(cE,cF){var cG,cH;cG=(cH=(bc.defCTS())[0],cF==null?cH:cF.$0);bc.scheduler().Fork(function(){if(!cG.c)cE(bE.New(function(cI){if(cI.$==1)bc.UncaughtAsyncError(cI.$0);},cG));});};bc.checkCancel=function(cE){return function(cF){if(cF.ct.c)bc.cancel(cF);else cE(cF);};};bc.Register=function(cE,cF){var cG;return cE===bc.noneCT()?{Dispose:function(){return null;}}:(cG=cE.r.push(cF)-1,{Dispose:function(){return _0.set(cE.r,cG,a.ignore);}});};bc.cancel=function(cE){cE.k({$:2,$0:new b4.New(cE.ct)});};bc.FromContinuations=function(cE){return function(cF){var cG;function cH(cI){if(cG[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cG[0]=true;bc.scheduler().Fork(cI);}}cG=[false];cE(function(cI){cH(function(){cF.k({$:0,$0:cI});});},function(cI){cH(function(){cF.k({$:1,$0:cI});});},function(cI){cH(function(){cF.k({$:2,$0:cI});});});};};bc.defCTS=function(){bK.$cctor();return bK.defCTS;};bc.UncaughtAsyncError=function(cE){cw.log("WebSharper: Uncaught asynchronous exception",cE);};bc.scheduler=function(){bK.$cctor();return bK.scheduler;};bc.noneCT=function(){bK.$cctor();return bK.noneCT;};bc.Return=function(cE){return function(cF){cF.k({$:0,$0:cE});};};bd=P.Route=cy.Class({ToLink:function(){return bI.WriteLink(this.Segments,this.QueryArgs);}},null,bd);bd.FromHash=function(cE,cF){var cG,cH;cG=cE.indexOf("#");return cG===-1?bd.get_Empty():(cH=cE.substring(cG+1),cF!=null&&cF.$0?cH===""||cH==="/"?bd.get_Empty():bJ.StartsWith(cH,"/")?bd.FromUrl(cH.substring(1),{$:1,$0:true}):bd.Segment$2(cH):bd.FromUrl(cE.substring(cG),{$:1,$0:false}));};bd.Combine=function(cE){var cF,cG,cH,cI,cJ,cK,cL;cF=_0.ofSeq(cE);cG=_0.length(cF);return cG===0?bd.get_Empty():cG===1?_0.get(cF,0):(cH=null,cI=null,cJ=[],cK=new w.New([]),cL=new w.New([]),_0.iter(function(cM){var cN,cO;cN=cM.Method;cN!=null&&cN.$==1?cH=cN:void 0;cO=cM.Body.f();cO===null?void 0:cI=cO;cK=y.FoldBack(function(cP,cQ,cR){return cR.Add(cP,cQ);},cK,cM.QueryArgs);cL=y.FoldBack(function(cP,cQ,cR){return cR.Add(cP,cQ);},cL,cM.FormData);S.iter(function(cP){cJ.push(cP);},cM.Segments);},cF),bd.New(S.ofSeq(cJ),cK,cL,cH,N.CreateFromValue(cI)));};bd.get_Empty=function(){return bd.New(bb.Empty,new w.New([]),new w.New([]),null,N.CreateFromValue(null));};bd.FromUrl=function(cE,cF){var cG,cH,cI;cG=(cH=cE.indexOf("?"),cH===-1?[cE,new w.New([])]:[bJ.Substring(cE,0,cH),bd.ParseQuery(cE.substring(cH+1))]);cI=bd.get_Empty();return bd.New(S.ofArray(bJ.SplitChars(cG[0],["/"],cF!=null&&cF.$0?0:1)),cG[1],cI.FormData,cI.Method,cI.Body);};bd.Segment$2=function(cE){var cF;cF=bd.get_Empty();return bd.New(S.ofArray([cE]),cF.QueryArgs,cF.FormData,cF.Method,cF.Body);};bd.Segment=function(cE,cF){var cG;cG=bd.get_Empty();return bd.New(cE,cG.QueryArgs,cG.FormData,cF,cG.Body);};bd.ParseQuery=function(cE){return y.OfArray(_0.ofSeq(_0.choose(function(cF){var cG,cH;cG=bJ.SplitChars(cF,["="],0);return!M.Equals(cG,null)&&cG.length===2?(cH=_0.get(cG,1),{$:1,$0:[_0.get(cG,0),cH]}):((function(cI){return function(cJ){return cI("wrong format for query argument: "+bi.toSafe(cJ));};}(function(cI){cw.log(cI);}))(cF),null);},bJ.SplitChars(cE,["&"],0))));};bd.New=function(cE,cF,cG,cH,cI){return new bd({Segments:cE,QueryArgs:cF,FormData:cG,Method:cH,Body:cI});};be.$cctor=function(){be.$cctor=a.ignore;be.BaseUrl="https://peopleapi.websharper.com";be.route=m.r$1();};bg.New=function(cE,cF,cG,cH,cI){return{Node:cE,Left:cF,Right:cG,Height:cH,Count:cI};};bh=v.Pair=cy.Class({Equals:function(cE){return M.Equals(this.Key,cE.Key);},GetHashCode:function(){return M.Hash(this.Key);},CompareTo0:function(cE){return M.Compare(this.Key,cE.Key);}},null,bh);bh.New=function(cE,cF){return new bh({Key:cE,Value:cF});};bf.TryFind=function(cE,cF){var cG;cG=(bf.Lookup(cE,cF))[0];return cG==null?null:{$:1,$0:cG.Node};};bf.Build=function(cE,cF,cG){var cH,cI,cJ;return cG-cF+1<=0?null:(cH=(cF+cG)/2>>0,(cI=bf.Build(cE,cF,cH-1),(cJ=bf.Build(cE,cH+1,cG),bf.Branch(_0.get(cE,cH),cI,cJ))));};bf.Lookup=function(cE,cF){var cG,cH,cI,cJ;cG=[];cH=cF;cI=true;while(cI)if(cH==null)cI=false;else{cJ=M.Compare(cE,cH.Node);cJ===0?cI=false:cJ===1?(cG.unshift([true,cH.Node,cH.Left]),cH=cH.Right):(cG.unshift([false,cH.Node,cH.Right]),cH=cH.Left);}return[cH,cG];};bf.Branch=function(cE,cF,cG){var cH,cI;return bg.New(cE,cF,cG,1+(cH=cF==null?0:cF.Height,(cI=cG==null?0:cG.Height,M.Compare(cH,cI)===1?cH:cI)),1+(cF==null?0:cF.Count)+(cG==null?0:cG.Count));};bf.Enumerate=function(cE,cF){function cG(cH,cI){var cJ;while(true)if(cH==null)return cI.$==1?{$:1,$0:[cI.$0[0],[cI.$0[1],cI.$1]]}:null;else if(cE){cJ=cH;cH=cJ.Right;cI=new bb({$:1,$0:[cJ.Node,cJ.Left],$1:cI});}else{cJ=cH;cH=cJ.Left;cI=new bb({$:1,$0:[cJ.Node,cJ.Right],$1:cI});}}return x.unfold(function(cH){return cG(cH[0],cH[1]);},[cF,bb.Empty]);};bf.Add=function(cE,cF){return bf.Put(function(cG,cH){return cH;},cE,cF);};bf.Put=function(cE,cF,cG){var cH,cI;cH=bf.Lookup(cF,cG);cI=cH[0];return cI==null?bf.Rebuild(cH[1],bf.Branch(cF,null,null)):bf.Rebuild(cH[1],bf.Branch(cE(cI.Node,cF),cI.Left,cI.Right));};bf.OfSeq=function(cE){var cF;cF=_0.ofSeq(x.distinct(cE));_0.sortInPlace(cF);return bf.Build(cF,0,cF.length-1);};bf.Rebuild=function(cE,cF){var cG,cI,cJ,cK,cL,cM,cN,cO,cP,cQ;function cH(cR){return cR==null?0:cR.Height;}cG=cF;for(cI=0,cJ=_0.length(cE)-1;cI<=cJ;cI++){cG=(cK=_0.get(cE,cI),cK[0]?(cL=cK[1],(cM=cK[2],cH(cG)>cH(cM)+1?cH(cG.Left)===cH(cG.Right)+1?(cN=cG.Left,bf.Branch(cN.Node,bf.Branch(cL,cM,cN.Left),bf.Branch(cG.Node,cN.Right,cG.Right))):bf.Branch(cG.Node,bf.Branch(cL,cM,cG.Left),cG.Right):bf.Branch(cL,cM,cG))):(cO=cK[1],(cP=cK[2],cH(cG)>cH(cP)+1?cH(cG.Right)===cH(cG.Left)+1?(cQ=cG.Right,bf.Branch(cQ.Node,bf.Branch(cG.Node,cG.Left,cQ.Left),bf.Branch(cO,cQ.Right,cP))):bf.Branch(cG.Node,cG.Left,bf.Branch(cO,cG.Right,cP)):bf.Branch(cO,cG,cP))));}return cG;};bi.padNumLeft=function(cE,cF){var cG;cG=_0.get(cE,0);return cG===" "||cG==="+"||cG==="-"?cG+bJ.PadLeftWith(cE.substr(1),cF-1,"0"):bJ.PadLeftWith(cE,cF,"0");};bi.toSafe=function(cE){return cE==null?"":cE;};bj.EditForm=function(cE,cF,cG){var cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5;function c6(c7){var c8;function c9(c_){return{$:1,$0:c_};}c8=function(c_){return cE(c9(c_));};return function(c_){return c8(c7(c_));};}return(cH=(cI=(cJ=bj.DisabledWhenRefreshing(cF),(cK=(cL=(cM=(cN=br.DynamicProp("disabled",Y.Map(function(c7){return!c7.Editing.HasDied;},cF)),(cO=(cP=Y.Map(function(c7){return c7.Editing.HasDied;},cF),(cQ=c6(function(c7){return{$:4,$0:c7};}),(cR=(cS=Y.Map(function(c7){return c7.Editing.Died;},cF),(cT=c6(function(c7){return{$:3,$0:c7};}),(cU=(cV=Y.Map(function(c7){return c7.Editing.Born;},cF),(cW=c6(function(c7){return{$:2,$0:c7};}),(cX=(cY=Y.Map(function(c7){return c7.Editing.LastName;},cF),(cZ=c6(function(c7){return{$:1,$0:c7};}),(c0=(c1=Y.Map(function(c7){return c7.Editing.FirstName;},cF),(c2=c6(function(c7){return{$:0,$0:c7};}),(c3=new bp.New$1(),(c3.h.push({$:8,$0:"firstname",$1:new b6.New(c1,c2)}),c3)))),(c0.h.push({$:8,$0:"lastname",$1:new b6.New(cY,cZ)}),c0)))),(cX.h.push({$:8,$0:"born",$1:new b6.New(cV,cW)}),cX)))),(cU.h.push({$:8,$0:"died",$1:new b6.New(cS,cT)}),cU)))),(cR.h.push({$:9,$0:"hasdied",$1:new b6.New(cP,cQ)}),cR)))),(cO.h.push({$:3,$0:"diedattr",$1:cN}),cO))),(cM.h.push(bq.EventQ2(cM.k,"submit",function(){return cM.i;},function(c7){cE(cG.SubmitMessage);c7.Event.preventDefault();})),cM)),(cL.h.push({$:1,$0:"submittext",$1:cG.SubmitText}),cL)),(cK.h.push({$:3,$0:"submitattr",$1:cJ}),cK))),(cI.h.push(bq.EventQ2(cI.k,"back",function(){return cI.i;},function(){cE({$:0,$0:{$:0}});})),cI)),(c4=bq.CompleteHoles(cH.k,cH.h,[["firstname",0],["lastname",0],["born",0],["died",0],["hasdied",2]]),(c5=new bo.New(c4[1],n.form(c4[0])),cH.i=c5,c5))).get_Doc();};bj.DisabledWhenRefreshing=function(cE){return bD.Concat([br.DynamicProp("disabled",Y.Map(function(cF){return cF.Refreshing;},cE)),br.DynamicClassPred("is-loading",Y.Map(function(cF){return cF.Refreshing;},cE))]);};bk.New=function(cE,cF){return{SubmitText:cE,SubmitMessage:cF};};bo=bn.TemplateInstance=cy.Class({get_Doc:function(){return this.doc;}},o,bo);bo.New=cy.Ctor(function(cE,cF){o.New.call(this);this.doc=cF;this.allVars=cE.$==0?cE.$0:e.FailWith("Should not happen");},bo);bp=bn.ProviderBuilder=cy.Class({},o,bp);bp.New$1=cy.Ctor(function(){var cE;o.New.call(this);this.i=null;this.k=(cE=bM.NewGuid(),a.String(cE));this.h=[];cy.SetOptional(this,"s",null);},bp);Y.Map=function(cE,cF){return Y.CreateLazy(function(){return bA.Map(cE,cF());});};Y.Sink=function(cE,cF){function cG(){bA.WhenRun(cF(),cE,function(){bc.scheduler().Fork(cG);});}bc.scheduler().Fork(cG);};Y.CreateLazy=function(cE){var cF;cF={c:null,o:cE};return function(){var cG,cH;cG=cF.c;return cG===null?(cG=cF.o(),cF.c=cG,(cH=cG.s,cH!=null&&cH.$==0)?cF.o=null:bA.WhenObsoleteRun(cG,function(){cF.c=null;}),cG):cG;};};Y.Map2Unit=function(cE,cF){return Y.CreateLazy(function(){return bA.Map2Unit(cE(),cF());});};Y.BindInner=function(cE,cF){return Y.JoinInner(Y.Map(cE,cF));};Y.Const=function(cE){var cF;cF=bA.New({$:0,$0:cE});return function(){return cF;};};Y.TryGet=function(cE){return bA.TryGet(cE());};Y.MapSeqCachedViewBy=function(cE,cF,cG){var cH;cH=[new _4.New$5()];return Y.Map(function(cI){var cJ,cK,cL;cJ=cH[0];cK=new _4.New$5();cL=b7.mapInPlace(function(cM){var cN,cO,cP;cN=cE(cM);cO=cJ.ContainsKey(cN)?(cP=cJ.get_Item(cN),(X.Set(cP.r,cM),cP)):Y.ConvertSeqNode(function(cQ){return cF(cN,cQ);},cM);cK.set_Item(cN,cO);return cO.e;},_0.ofSeq(cI));cH[0]=cK;return cL;},cG);};Y.JoinInner=function(cE){return Y.CreateLazy(function(){return bA.JoinInner(cE());});};Y.ConvertSeqNode=function(cE,cF){var cG,cH;cG=X.Create$1(cF);cH=cG.get_View();return{e:cE(cH),r:cG,w:cH};};Y.Get=function(cE,cF){var cG;function cH(){bA.WhenRun(cF(),function(cI){if(!cG[0]){cG[0]=true;cE(cI);}},function(){if(!cG[0])cH();});}cG=[false];cH();};Y.Bind=function(cE,cF){return Y.Join(Y.Map(cE,cF));};Y.Map3=function(cE,cF,cG,cH){return Y.CreateLazy(function(){return bA.Map3(cE,cF(),cG(),cH());});};Y.Sequence=function(cE){return Y.CreateLazy(function(){return bA.Sequence(x.map(function(cF){return cF();},cE));});};Y.Map2=function(cE,cF,cG){return Y.CreateLazy(function(){return bA.Map2(cE,cF(),cG());});};Y.Join=function(cE){return Y.CreateLazy(function(){return bA.Join(cE());});};bq.EventQ2=function(cE,cF,cG,cH){return{$:5,$0:cF,$1:function(cI){return function(cJ){return cH({Vars:cG(),Target:cI,Event:cJ});};}};};bq.CompleteHoles=function(cE,cF,cG){var cI,cJ,cK,cL,cM;function cH(cN,cO){var cP;return cJ.Contains(cN)?null:(cP=cO===0?b9.GetOrAddHoleFor(cE,cN,function(){return{$:8,$0:cN,$1:X.Create$1("")};}):cO===1?b9.GetOrAddHoleFor(cE,cN,function(){return{$:13,$0:cN,$1:X.Create$1(0)};}):cO===2?b9.GetOrAddHoleFor(cE,cN,function(){return{$:9,$0:cN,$1:X.Create$1(false)};}):e.FailWith("Invalid value type"),(cI.set_Item(cN,cP),{$:1,$0:cP}));}cI=new _4.New$5();cJ=new bx.New$3();cK=T.Get(cF);try{while(cK.MoveNext()){cL=cK.Current();cM=cL.$0;cJ.Add(cM);cI.set_Item(cM,cL);}}finally{if(typeof cK=="object"&&"Dispose"in cK)cK.Dispose();}return[x.append(cF,_0.choose(function(cN){return cH(cN[0],cN[1]);},cG)),{$:0,$0:cI}];};br.ClassPred=function(cE,cF){return bO.Static(function(cG){if(cF)bP.AddClass(cG,cE);else bP.RemoveClass(cG,cE);});};br.DynamicClassPred=function(cE,cF){return bO.Dynamic(cF,function(cG){return function(cH){return cH?bP.AddClass(cG,cE):bP.RemoveClass(cG,cE);};});};br.DynamicCustom=function(cE,cF){return bO.Dynamic(cF,cE);};br.Prop=function(cE,cF){return bO.Static(function(cG){cG[cE]=cF;});};br.DynamicProp=function(cE,cF){return bO.Dynamic(cF,function(cG){return function(cH){cG[cE]=cH;};});};br.Handler=function(cE,cF){return bO.Static(function(cG){cG.addEventListener(cE,function(cH){return(cF(cG))(cH);},false);});};br.OnAfterRender=function(cE){return new bD({$:4,$0:cE});};br.Value=function(cE){var cF;cF=(((cp.StringApply())(cE))(bO.Static))(function(cG){return br.DynamicCustom(cG,cE.get_View());});return bD.Append(cF[0],cF[1]);};br.Checked=function(cE){var cF;cF=(((cp.BoolCheckedApply())(cE))(bO.Static))(function(cG){return br.DynamicCustom(cG,cE.get_View());});return bD.Append(cF[0],cF[1]);};br.IntValue=function(cE){var cF;cF=(((cp.IntApplyChecked())(cE))(bO.Static))(function(cG){return br.DynamicCustom(cG,cE.get_View());});return bD.Append(cF[0],cF[1]);};br.IntValueUnchecked=function(cE){var cF;cF=(((cp.IntApplyUnchecked())(cE))(bO.Static))(function(cG){return br.DynamicCustom(cG,cE.get_View());});return bD.Append(cF[0],cF[1]);};br.FloatValue=function(cE){var cF;cF=(((cp.FloatApplyChecked())(cE))(bO.Static))(function(cG){return br.DynamicCustom(cG,cE.get_View());});return bD.Append(cF[0],cF[1]);};br.FloatValueUnchecked=function(cE){var cF;cF=(((cp.FloatApplyUnchecked())(cE))(bO.Static))(function(cG){return br.DynamicCustom(cG,cE.get_View());});return bD.Append(cF[0],cF[1]);};br.Dynamic=function(cE,cF){return bO.Dynamic(cF,function(cG){return function(cH){return cG.setAttribute(cE,cH);};});};bu.Id=function(){bu.set_counter(bu.counter()+1);return"uid"+a.String(bu.counter());};bu.set_counter=function(cE){b_.$cctor();b_.counter=cE;};bu.counter=function(){b_.$cctor();return b_.counter;};bu.Int=function(){bu.set_counter(bu.counter()+1);return bu.counter();};bv.JSUnion=function(cE,cF){var cG;function cH(cL){var cM;function cN(cO){return cO!=null&&cO.$==1&&M.Equals(cL,cO.$0);}cM=x.tryFindIndex(function(cO){return cN(cO[0]);},cF);return cM!=null&&cM.$==1?cM.$0:cL.$;}function cI(cL,cM){return _0.init(_0.length((_0.get(cF,cL))[2]),function(cN){return cM["$"+a.String(cN)];});}function cJ(cL,cM){var cN,cO,cP;cN=cE==null?{}:new cE();cO=_0.get(cF,cL);return(cP=cO[0],cP!=null&&cP.$==1)?cO[0].$0:(cN.$=cL,x.iteri(function(cQ,cR){cN["$"+a.String(cQ)]=cR;},cM),cN);}function cK(cL,cM){var cN;function cO(cP,cQ){return[cL,cP,cQ,cN];}cN=cM[2];return x.map(function(cP){return cO(cP[0],cP[1]);},cM[1]);}cG=x.collect(function(cL){return cK(cL[0],cL[1]);},x.indexed(cF));return bH.New$1(function(cL){function cM(cN,cO,cP,cQ){var cR,cS,cT;function cU(cV,cW,cX){var cY;function cZ(c0,c1){return cU(cY,c0,new bb({$:1,$0:c1,$1:cX}));}return cV.$==1?(cY=cV.$1,x.collect(function(c0){return cZ(c0[0],c0[1]);},cV.$0.Parse(cW))):[[cW,cJ(cN,_0.ofList(S.rev(cX)))]];}return bv.isCorrectMethod(cO,cL.Method)?(cR=bQ.startsWith(S.ofArray(cP),cL.Segments),cR==null?[]:(cS=cR.$0,(cT=S.ofArray(cQ),cT.$==0?[[bd.New(cS,cL.QueryArgs,cL.FormData,cL.Method,cL.Body),cJ(cN,[])]]:cU(cT,bd.New(cS,cL.QueryArgs,cL.FormData,cL.Method,cL.Body),bb.Empty)))):[];}return x.collect(function(cN){return cM(cN[0],cN[1],cN[2],cN[3]);},cG);},function(cL){var cM,cN,cO,cP,cQ,cR;function cS(cT,cU){return cU.Write(cT);}cM=cH(cL);cN=_0.get(cF,cM);cO=cN[2];cP=_0.get(cN[1],0);cQ=[bd.Segment(S.ofArray(cP[1]),cP[0])];return!M.Equals(cO,null)&&cO.length===0?{$:1,$0:cQ}:(cR=(((cy.Curried3(_0.map2))(cS))(cI(cM,cL)))(cO),_0.forall(function(cT){return cT!=null;},cR)?{$:1,$0:x.append(cQ,x.collect(function(cT){return cT.$0;},cR))}:null);});};bv.isCorrectMethod=function(cE,cF){return cF!=null&&cF.$==1?cE!=null&&cE.$==1?M.Equals(cF.$0,cE.$0):true:!(cE!=null&&cE.$==1);};bv.rInt=function(){b$.$cctor();return b$.rInt;};bv.rCors=function(cE){return bH.New$1(function(cF){function cG(cH,cI){var cJ,cK;return[cH,cy.DeleteEmptyFields({DefaultAllows:(cJ=null,cJ?cJ.$0:void 0),EndPoint:(cK={$:1,$0:cI},cK?cK.$0:void 0)},["DefaultAllows","EndPoint"])];}return x.map(function(cH){return cG(cH[0],cH[1]);},cE.Parse(cF));},function(cF){var cG,cH;cG=(cH=cy.GetOptional(cF.EndPoint),cH==null?{$:1,$0:null}:{$:0,$0:cH.$0});return cG.$==1?{$:1,$0:[bd.get_Empty()]}:cE.Write(cG.$0);});};bw.$cctor=function(){bw.$cctor=a.ignore;bw.LoadedTemplates=new _4.New$5();bw.LocalTemplatesLoaded=false;bw.GlobalHoles=new _4.New$5();bw.TextHoleRE="\\${([^}]+)}";bw.RenderedFullDocTemplate=null;};bx=v.HashSet=cy.Class({Add:function(cE){return this.add(cE);},Contains:function(cE){var cF;cF=this.data[this.hash(cE)];return cF==null?false:this.arrContains(cE,cF);},add:function(cE){var cF,cG;cF=this.hash(cE);cG=this.data[cF];return cG==null?(this.data[cF]=[cE],this.count=this.count+1,true):this.arrContains(cE,cG)?false:(cG.push(cE),this.count=this.count+1,true);},arrContains:function(cE,cF){var cG,cH,cI,cJ;cG=true;cH=0;cJ=cF.length;while(cG&&cH<cJ)if(this.equals.apply(null,[cF[cH],cE]))cG=false;else cH=cH+1;return!cG;},ExceptWith:function(cE){var cF;cF=T.Get(cE);try{while(cF.MoveNext())this.Remove(cF.Current());}finally{if(typeof cF=="object"&&"Dispose"in cF)cF.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(cE){var cF,cG,cH,cI;cF=0;cG=cl.concat(this.data);for(cH=0,cI=cG.length-1;cH<=cI;cH++)_0.set(cE,cH,cG[cH]);},IntersectWith:function(cE){var cF,cG,cH,cI,cJ;cF=new bx.New$4(cE,this.equals,this.hash);cG=cl.concat(this.data);for(cH=0,cI=cG.length-1;cH<=cI;cH++){cJ=cG[cH];!cF.Contains(cJ)?this.Remove(cJ):void 0;}},Remove:function(cE){var cF;cF=this.data[this.hash(cE)];return cF==null?false:this.arrRemove(cE,cF)&&(this.count=this.count-1,true);},arrRemove:function(cE,cF){var cG,cH,cI,cJ;cG=true;cH=0;cJ=cF.length;while(cG&&cH<cJ)if(this.equals.apply(null,[cF[cH],cE])){cF.splice.apply(cF,[cH,1]);cG=false;}else cH=cH+1;return!cG;},GetEnumerator:function(){return T.Get(cl.concat(this.data));},GetEnumerator0:function(){return T.Get(cl.concat(this.data));}},o,bx);bx.New$3=cy.Ctor(function(){bx.New$4.call(this,[],M.Equals,M.Hash);},bx);bx.New$4=cy.Ctor(function(cE,cF,cG){var cH;o.New.call(this);this.equals=cF;this.hash=cG;this.data=[];this.count=0;cH=T.Get(cE);try{while(cH.MoveNext())this.add(cH.Current());}finally{if(typeof cH=="object"&&"Dispose"in cH)cH.Dispose();}},bx);bx.New$2=cy.Ctor(function(cE){bx.New$4.call(this,cE,M.Equals,M.Hash);},bx);by.LinkElement=function(cE,cF){by.InsertDoc(cE,cF,null);};by.InsertDoc=function(cE,cF,cG){var cH;return cF!=null&&cF.$==1?by.InsertNode(cE,cF.$0.El,cG):cF!=null&&cF.$==2?(cH=cF.$0,(cH.Dirty=false,by.InsertDoc(cE,cH.Current,cG))):cF==null?cG:cF!=null&&cF.$==4?by.InsertNode(cE,cF.$0.Text,cG):cF!=null&&cF.$==5?by.InsertNode(cE,cF.$0,cG):cF!=null&&cF.$==6?_0.foldBack(function(cI,cJ){return cI==null||cI.constructor===_1?by.InsertDoc(cE,cI,cJ):by.InsertNode(cE,cI,cJ);},cF.$0.Els,cG):by.InsertDoc(cE,cF.$0,by.InsertDoc(cE,cF.$1,cG));};by.CreateRunState=function(cE,cF){return cb.New(cc.get_Empty(),by.CreateElemNode(cE,bO.EmptyAttr(),cF));};by.PerformAnimatedUpdate=function(cE,cF,cG){var cH;return bW.get_UseAnimations()?(cH=null,bc.Delay(function(){var cI,cJ,cK;cI=cc.FindAll(cG);cJ=by.ComputeChangeAnim(cF,cI);cK=by.ComputeEnterAnim(cF,cI);return bc.Bind(bW.Play(bW.Append(cJ,by.ComputeExitAnim(cF,cI))),function(){return bc.Bind(by.SyncElemNodesNextFrame(cE,cF),function(){return bc.Bind(bW.Play(cK),function(){cF.PreviousNodes=cI;return bc.Return(null);});});});})):by.SyncElemNodesNextFrame(cE,cF);};by.PerformSyncUpdate=function(cE,cF,cG){var cH;cH=cc.FindAll(cG);by.SyncElemNode(cE,cF.Top);cF.PreviousNodes=cH;};by.InsertNode=function(cE,cF,cG){bP.InsertAt(cE,cG,cF);return cF;};by.CreateElemNode=function(cE,cF,cG){var cH;by.LinkElement(cE,cG);cH=bO.Insert(cE,cF);return bC.New(cH,cG,null,cE,bu.Int(),cy.GetOptional(cH.OnAfterRender));};by.SyncElemNodesNextFrame=function(cE,cF){function cG(cH){a.requestAnimationFrame(function(){by.SyncElemNode(cE,cF.Top);cH();});}return bX.BatchUpdatesEnabled()?bc.FromContinuations(function(cH,cI,cJ){return cG.apply(null,[cH,cI,cJ]);}):(by.SyncElemNode(cE,cF.Top),bc.Return(null));};by.ComputeExitAnim=function(cE,cF){return bW.Concat(_0.map(function(cG){return bO.GetExitAnim(cG.Attr);},cc.ToArray(cc.Except(cF,cc.Filter(function(cG){return bO.HasExitAnim(cG.Attr);},cE.PreviousNodes)))));};by.ComputeEnterAnim=function(cE,cF){return bW.Concat(_0.map(function(cG){return bO.GetEnterAnim(cG.Attr);},cc.ToArray(cc.Except(cE.PreviousNodes,cc.Filter(function(cG){return bO.HasEnterAnim(cG.Attr);},cF)))));};by.ComputeChangeAnim=function(cE,cF){var cG;function cH(cI){return bO.HasChangeAnim(cI.Attr);}cG=function(cI){return cc.Filter(cH,cI);};return bW.Concat(_0.map(function(cI){return bO.GetChangeAnim(cI.Attr);},cc.ToArray(cc.Intersect(cG(cE.PreviousNodes),cG(cF)))));};by.SyncElemNode=function(cE,cF){!cE?by.SyncElement(cF):void 0;by.Sync(cF.Children);by.AfterRender(cF);};by.SyncElement=function(cE){function cF(cG){function cH(cI){var cJ,cK;return cI!=null&&cI.$==0?cH(cI.$0)||cH(cI.$1):cI!=null&&cI.$==2?(cJ=cI.$0,cJ.Dirty||cH(cJ.Current)):cI!=null&&cI.$==6&&(cK=cI.$0,cK.Dirty||_0.exists(cF,cK.Holes));}return cH(cG.Children);}bO.Sync(cE.El,cE.Attr);cF(cE)?by.DoSyncElement(cE):void 0;};by.Sync=function(cE){var cF,cG;if(cE!=null&&cE.$==1)by.SyncElemNode(false,cE.$0);else if(cE!=null&&cE.$==2)by.Sync(cE.$0.Current);else if(cE==null);else if(cE!=null&&cE.$==5);else if(cE!=null&&cE.$==4){cF=cE.$0;cF.Dirty?(cF.Text.nodeValue=cF.Value,cF.Dirty=false):void 0;}else if(cE!=null&&cE.$==6){cG=cE.$0;_0.iter(function(cH){by.SyncElemNode(false,cH);},cG.Holes);_0.iter(function(cH){bO.Sync(cH[0],cH[1]);},cG.Attrs);by.AfterRender(cG);}else{by.Sync(cE.$0);by.Sync(cE.$1);}};by.AfterRender=function(cE){var cF;cF=cy.GetOptional(cE.Render);cF!=null&&cF.$==1?(cF.$0(cE.El),cy.SetOptional(cE,"Render",null)):void 0;};by.DoSyncElement=function(cE){var cF,cG,cH;function cI(cJ,cK){var cL,cM;return cJ!=null&&cJ.$==1?cJ.$0.El:cJ!=null&&cJ.$==2?(cL=cJ.$0,cL.Dirty?(cL.Dirty=false,by.InsertDoc(cF,cL.Current,cK)):cI(cL.Current,cK)):cJ==null?cK:cJ!=null&&cJ.$==4?cJ.$0.Text:cJ!=null&&cJ.$==5?cJ.$0:cJ!=null&&cJ.$==6?(cM=cJ.$0,(cM.Dirty?cM.Dirty=false:void 0,_0.foldBack(function(cN,cO){return cN==null||cN.constructor===_1?cI(cN,cO):cN;},cM.Els,cK))):cI(cJ.$0,cI(cJ.$1,cK));}cF=cE.El;ct.Iter((cG=cE.El,function(cJ){bP.RemoveNode(cG,cJ);}),ct.Except(ct.DocChildren(cE),ct.Children(cE.El,cy.GetOptional(cE.Delimiters))));cI(cE.Children,(cH=cy.GetOptional(cE.Delimiters),cH!=null&&cH.$==1?cH.$0[1]:null));};by.CreateEmbedNode=function(){return{Current:null,Dirty:false};};by.UpdateEmbedNode=function(cE,cF){cE.Current=cF;cE.Dirty=true;};by.InsertBeforeDelim=function(cE,cF){var cG,cH;cG=cE.parentNode;cH=self.document.createTextNode("");cG.insertBefore(cH,cE);by.LinkPrevElement(cE,cF);return cH;};by.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};by.UpdateTextNode=function(cE,cF){cE.Value=cF;cE.Dirty=true;};by.LinkPrevElement=function(cE,cF){by.InsertDoc(cE.parentNode,cF,cE);};bz=D.ConcreteVar=cy.Class({UpdateMaybe:function(cE){var cF;cF=cE(this.Get());cF!=null&&cF.$==1?this.Set(cF.$0):void 0;},Set:function(cE){if(this.isConst)(function(cF){return cF("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cF){cw.log(cF);}));else{bA.Obsolete(this.snap);this.current=cE;this.snap=bA.New({$:2,$0:cE,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},Update:function(cE){this.Set(cE(this.Get()));}},E,bz);bz.New=cy.Ctor(function(cE,cF,cG){var cH;cH=this;E.New.call(this);this.isConst=cE;this.current=cG;this.snap=cF;this.view=function(){return cH.snap;};this.id=bu.Int();},bz);bA.Map=function(cE,cF){var cG,cH;cG=cF.s;return cG!=null&&cG.$==0?bA.New({$:0,$0:cE(cG.$0)}):(cH=bA.New({$:3,$0:[],$1:[]}),(bA.When(cF,function(cI){bA.MarkDone(cH,cF,cE(cI));},cH),cH));};bA.WhenRun=function(cE,cF,cG){var cH;cH=cE.s;cH==null?cG():cH!=null&&cH.$==2?(cH.$1.push(cG),cF(cH.$0)):cH!=null&&cH.$==3?(cH.$0.push(cF),cH.$1.push(cG)):cF(cH.$0);};bA.WhenObsoleteRun=function(cE,cF){var cG;cG=cE.s;cG==null?cF():cG!=null&&cG.$==2?cG.$1.push(cF):cG!=null&&cG.$==3?cG.$1.push(cF):void 0;};bA.When=function(cE,cF,cG){var cH;cH=cE.s;cH==null?bA.Obsolete(cG):cH!=null&&cH.$==2?(bA.EnqueueSafe(cH.$1,cG),cF(cH.$0)):cH!=null&&cH.$==3?(cH.$0.push(cF),bA.EnqueueSafe(cH.$1,cG)):cF(cH.$0);};bA.MarkDone=function(cE,cF,cG){var cH;if(cH=cF.s,cH!=null&&cH.$==0)bA.MarkForever(cE,cG);else bA.MarkReady(cE,cG);};bA.EnqueueSafe=function(cE,cF){var cG,cH,cI,cJ;cE.push(cF);if(cE.length%20===0){cG=cE.slice(0);cr.Clear(cE);for(cH=0,cI=_0.length(cG)-1;cH<=cI;cH++){cJ=_0.get(cG,cH);typeof cJ=="object"?function(cK){if(cK.s)cE.push(cK);}(cJ):function(cK){cE.push(cK);}(cJ);}}else void 0;};bA.MarkForever=function(cE,cF){var cG,cH,cI,cJ;cG=cE.s;if(cG!=null&&cG.$==3){cE.s={$:0,$0:cF};cH=cG.$0;for(cI=0,cJ=_0.length(cH)-1;cI<=cJ;cI++)(_0.get(cH,cI))(cF);}else void 0;};bA.MarkReady=function(cE,cF){var cG,cH,cI,cJ;cG=cE.s;if(cG!=null&&cG.$==3){cE.s={$:2,$0:cF,$1:cG.$1};cH=cG.$0;for(cI=0,cJ=_0.length(cH)-1;cI<=cJ;cI++)(_0.get(cH,cI))(cF);}else void 0;};bA.Map2Unit=function(cE,cF){var cG,cH,cI;function cJ(){var cK,cL,cM;if(!(cK=cI.s,cK!=null&&cK.$==0||cK!=null&&cK.$==2)){cL=bA.ValueAndForever(cE);cM=bA.ValueAndForever(cF);cL!=null&&cL.$==1?cM!=null&&cM.$==1?cL.$0[1]&&cM.$0[1]?bA.MarkForever(cI,null):bA.MarkReady(cI,null):void 0:void 0;}}cG=cE.s;cH=cF.s;return cG!=null&&cG.$==0?cH!=null&&cH.$==0?bA.New({$:0,$0:null}):cF:cH!=null&&cH.$==0?cE:(cI=bA.New({$:3,$0:[],$1:[]}),(bA.When(cE,cJ,cI),bA.When(cF,cJ,cI),cI));};bA.TryGet=function(cE){var cF,cG;cF=cE.s;return(cF!=null&&cF.$==0?(cG=cF.$0,true):cF!=null&&cF.$==2&&(cG=cF.$0,true))?{$:1,$0:cG}:null;};bA.ValueAndForever=function(cE){var cF;cF=cE.s;return cF!=null&&cF.$==0?{$:1,$0:[cF.$0,true]}:cF!=null&&cF.$==2?{$:1,$0:[cF.$0,false]}:null;};bA.JoinInner=function(cE){var cF;cF=bA.New({$:3,$0:[],$1:[]});bA.When(cE,function(cG){var cH;cH=cG();bA.When(cH,function(cI){var cJ,cK;if((cJ=cH.s,cJ!=null&&cJ.$==0)&&(cK=cE.s,cK!=null&&cK.$==0))bA.MarkForever(cF,cI);else bA.MarkReady(cF,cI);},cF);bA.WhenObsolete(cE,cH);},cF);return cF;};bA.Copy=function(cE){var cF,cG,cH;cF=cE.s;return cF==null?cE:cF!=null&&cF.$==2?(cG=bA.New({$:2,$0:cF.$0,$1:[]}),(bA.WhenObsolete(cE,cG),cG)):cF!=null&&cF.$==3?(cH=bA.New({$:3,$0:[],$1:[]}),(bA.When(cE,function(cI){bA.MarkDone(cH,cE,cI);},cH),cH)):cE;};bA.WhenObsolete=function(cE,cF){var cG;cG=cE.s;cG==null?bA.Obsolete(cF):cG!=null&&cG.$==2?bA.EnqueueSafe(cG.$1,cF):cG!=null&&cG.$==3?bA.EnqueueSafe(cG.$1,cF):void 0;};bA.Map3=function(cE,cF,cG,cH){var cI,cJ,cK,cL;function cM(cN){var cO,cP,cQ,cR;if(!(cO=cL.s,cO!=null&&cO.$==0||cO!=null&&cO.$==2)){cP=bA.ValueAndForever(cF);cQ=bA.ValueAndForever(cG);cR=bA.ValueAndForever(cH);cP!=null&&cP.$==1?cQ!=null&&cQ.$==1?cR!=null&&cR.$==1?cP.$0[1]&&cQ.$0[1]&&cR.$0[1]?bA.MarkForever(cL,cE(cP.$0[0],cQ.$0[0],cR.$0[0])):bA.MarkReady(cL,cE(cP.$0[0],cQ.$0[0],cR.$0[0])):void 0:void 0:void 0;}}cI=cF.s;cJ=cG.s;cK=cH.s;return cI!=null&&cI.$==0?cJ!=null&&cJ.$==0?cK!=null&&cK.$==0?bA.New({$:0,$0:cE(cI.$0,cJ.$0,cK.$0)}):bA.Map3Opt1(cE,cI.$0,cJ.$0,cH):cK!=null&&cK.$==0?bA.Map3Opt2(cE,cI.$0,cK.$0,cG):bA.Map3Opt3(cE,cI.$0,cG,cH):cJ!=null&&cJ.$==0?cK!=null&&cK.$==0?bA.Map3Opt4(cE,cJ.$0,cK.$0,cF):bA.Map3Opt5(cE,cJ.$0,cF,cH):cK!=null&&cK.$==0?bA.Map3Opt6(cE,cK.$0,cF,cG):(cL=bA.New({$:3,$0:[],$1:[]}),(bA.When(cF,cM,cL),bA.When(cG,cM,cL),bA.When(cH,cM,cL),cL));};bA.Sequence=function(cE){var cF,cG,cH;function cI(cJ){var cK;if(cH[0]===0){cK=_0.map(function(cL){var cM;cM=cL.s;return cM!=null&&cM.$==0?cM.$0:cM!=null&&cM.$==2?cM.$0:e.FailWith("value not found by View.Sequence");},cF);_0.forall(function(cL){var cM;cM=cL.s;return cM!=null&&cM.$==0;},cF)?bA.MarkForever(cG,cK):bA.MarkReady(cG,cK);}else cH[0]--;}cF=_0.ofSeq(cE);return cF.length==0?bA.New({$:0,$0:[]}):(cG=bA.New({$:3,$0:[],$1:[]}),(cH=[_0.length(cF)-1],(_0.iter(function(cJ){bA.When(cJ,cI,cG);},cF),cG)));};bA.Map2=function(cE,cF,cG){var cH,cI,cJ;function cK(cL){var cM,cN,cO;if(!(cM=cJ.s,cM!=null&&cM.$==0||cM!=null&&cM.$==2)){cN=bA.ValueAndForever(cF);cO=bA.ValueAndForever(cG);cN!=null&&cN.$==1?cO!=null&&cO.$==1?cN.$0[1]&&cO.$0[1]?bA.MarkForever(cJ,cE(cN.$0[0],cO.$0[0])):bA.MarkReady(cJ,cE(cN.$0[0],cO.$0[0])):void 0:void 0;}}cH=cF.s;cI=cG.s;return cH!=null&&cH.$==0?cI!=null&&cI.$==0?bA.New({$:0,$0:cE(cH.$0,cI.$0)}):bA.Map2Opt1(cE,cH.$0,cG):cI!=null&&cI.$==0?bA.Map2Opt2(cE,cI.$0,cF):(cJ=bA.New({$:3,$0:[],$1:[]}),(bA.When(cF,cK,cJ),bA.When(cG,cK,cJ),cJ));};bA.Join=function(cE){var cF;cF=bA.New({$:3,$0:[],$1:[]});bA.When(cE,function(cG){var cH;cH=cG();bA.When(cH,function(cI){var cJ,cK;if((cJ=cH.s,cJ!=null&&cJ.$==0)&&(cK=cE.s,cK!=null&&cK.$==0))bA.MarkForever(cF,cI);else bA.MarkReady(cF,cI);},cF);},cF);return cF;};bA.Map3Opt1=function(cE,cF,cG,cH){return bA.Map(function(cI){return cE(cF,cG,cI);},cH);};bA.Map3Opt2=function(cE,cF,cG,cH){return bA.Map(function(cI){return cE(cF,cI,cG);},cH);};bA.Map3Opt3=function(cE,cF,cG,cH){return bA.Map2(function(cI,cJ){return cE(cF,cI,cJ);},cG,cH);};bA.Map3Opt4=function(cE,cF,cG,cH){return bA.Map(function(cI){return cE(cI,cF,cG);},cH);};bA.Map3Opt5=function(cE,cF,cG,cH){return bA.Map2(function(cI,cJ){return cE(cI,cF,cJ);},cG,cH);};bA.Map3Opt6=function(cE,cF,cG,cH){return bA.Map2(function(cI,cJ){return cE(cI,cJ,cF);},cG,cH);};bA.Map2Opt1=function(cE,cF,cG){return bA.Map(function(cH){return cE(cF,cH);},cG);};bA.Map2Opt2=function(cE,cF,cG){return bA.Map(function(cH){return cE(cH,cF);},cG);};bB=D.Updates=cy.Class({},null,bB);bB.Create=function(cE){var cF;cF=null;cF=bB.New(cE,null,function(){var cG;cG=cF.s;return cG===null?(cG=bA.Copy(cF.c()),cF.s=cG,bA.WhenObsoleteRun(cG,function(){cF.s=null;}),cG):cG;});return cF;};bB.New=function(cE,cF,cG){return new bB({c:cE,s:cF,v:cG});};bC=D.DocElemNode=cy.Class({Equals:function(cE){return this.ElKey===cE.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bC);bC.New=function(cE,cF,cG,cH,cI,cJ){var cK;return new bC((cK={Attr:cE,Children:cF,El:cH,ElKey:cI},(cy.SetOptional(cK,"Delimiters",cG),cy.SetOptional(cK,"Render",cJ),cK)));};bD=D.AttrProxy=cy.Class({},null,bD);bD.Create=function(cE,cF){return bO.Static(function(cG){cG.setAttribute(cE,cF);});};bD.Concat=function(cE){var cF;cF=b7.ofSeqNonCopying(cE);return b7.TreeReduce(bO.EmptyAttr(),bD.Append,cF);};bD.Append=function(cE,cF){return bO.AppendTree(cE,cF);};bD.Handler=function(cE,cF){return bD.HandlerImpl(cE,cF);};bD.HandlerImpl=function(cE,cF){return bO.Static(function(cG){cG.addEventListener(cE,function(cH){return(cF(cG))(cH);},false);});};bE.New=function(cE,cF){return{k:cE,ct:cF};};bG=J.NonStandardPromiseRejectionException=cy.Class({},bF,bG);bG.New=cy.Ctor(function(cE){this.message="Promise rejected";_1.setPrototypeOf(this,bG.prototype);this.reason=cE;},bG);bH.New$1=function(cE,cF){return{Parse:cE,Write:cF};};bI.WriteLink=function(cE,cF){var cG;cG=cF.get_IsEmpty()?"":"?"+bI.WriteQuery(cF);return"/"+bI.Concat(cE)+cG;};bI.Concat=function(cE){var cF,cG;cF=[];cG=true;S.iter(function(cH){if(!bJ.IsNullOrEmpty(cH)){cG?cG=false:cF.push("/");cF.push(cH);}},cE);return bJ.Join("",_0.ofSeq(cF));};bI.WriteQuery=function(cE){function cF(cG,cH){return cG+"="+cH;}return bJ.concat("&",x.map(function(cG){return cF(cG[0],cG[1]);},y.ToSeq(cE)));};bJ.TrimEnd=function(cE,cF){var cG,cH;if(M.Equals(cF,null)||cF.length==0)return bJ.TrimEndWS(cE);else{cG=cE.length-1;cH=true;while(cG>=0&&cH)(function(){var cI;cI=cE[cG];return _0.exists(function(cJ){return cI===cJ;},cF)?void(cG=cG-1):void(cH=false);}());return bJ.Substring(cE,0,cG+1);}};bJ.StartsWith=function(cE,cF){return cE.substring(0,cF.length)==cF;};bJ.TrimEndWS=function(cE){return cE.replace(new a.RegExp("\\s+$"),"");};bJ.PadLeftWith=function(cE,cF,cG){return cF>cE.length?a.Array(cF-cE.length+1).join(cG)+cE:cE;};bJ.concat=function(cE,cF){return _0.ofSeq(cF).join(cE);};bJ.SplitChars=function(cE,cF,cG){return bJ.Split(cE,new a.RegExp("["+bJ.RegexEscape(cF.join(""))+"]"),cG);};bJ.Substring=function(cE,cF,cG){return cE.substr(cF,cG);};bJ.Split=function(cE,cF,cG){return cG===1?_0.filter(function(cH){return cH!=="";},bJ.SplitWith(cE,cF)):bJ.SplitWith(cE,cF);};bJ.RegexEscape=function(cE){return cE.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bJ.IsNullOrEmpty=function(cE){return cE==null||cE=="";};bJ.Join=function(cE,cF){return cF.join(cE);};bJ.SplitWith=function(cE,cF){return cE.split(cF);};bJ.forall=function(cE,cF){return x.forall(cE,bJ.protect(cF));};bJ.protect=function(cE){return cE===null?"":cE;};bJ.Trim=function(cE){return cE.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bK.$cctor=function(){bK.$cctor=a.ignore;bK.noneCT=bZ.New(false,[]);bK.scheduler=new b3.New();bK.defCTS=[new b5.New()];bK.Zero=bc.Return();bK.GetCT=function(cE){cE.k({$:0,$0:cE.ct});};};_0.mapiInPlace=function(cE,cF){var cG,cH;for(cG=0,cH=cF.length-1;cG<=cH;cG++)cF[cG]=cE(cG,cF[cG]);return cF;};_0.mapInPlace=function(cE,cF){var cG,cH;for(cG=0,cH=cF.length-1;cG<=cH;cG++)cF[cG]=cE(cF[cG]);};x.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};bM.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(cE){var cF,cG;cF=cB.random()*16|0;cG=cE=="x"?cF:cF&3|8;return cG.toString(16);});};bM.TryParse=function(cE,cF){try{cF.set(bM.Parse(cE));return true;}catch(cG){return false;}};bM.Parse=function(cE){var cF,cG,cH;try{return bM.ParseExact(cE,"D");}catch(cI){try{cF=bM.ParseExact(cE,"B");}catch(cJ){try{cG=bM.ParseExact(cE,"P");}catch(cK){try{cH=bM.ParseExact(cE,"N");}catch(cL){cH=bM.ParseExact(cE,"X");}cG=cH;}cF=cG;}return cF;}};bM.ParseExact=function(cE,cF){var cG,cH,cI,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT;function cJ(cU){var cV,cW,cX,cY;for(cV=0,cW=35;cV<=cW;cV++){cV===8||(cV===13||(cV===18||cV===23))?cU[cV]!=="-"?bM.ShapeError():void 0:(cY=cU[cV],!("0"<=cY&&cY<="9"||"a"<=cY&&cY<="f")?bM.ShapeError():void 0);}return cU;}cK=cF.toUpperCase();if(cK==="N"){cL=bJ.Trim(cE).toLowerCase();if(cL.length!==32)bM.ShapeError();for(cM=0,cN=31;cM<=cN;cM++){cO=cL[cM];!("0"<=cO&&cO<="9"||"a"<=cO&&cO<="f")?bM.ShapeError():void 0;}return bJ.Substring(cL,0,8)+"-"+bJ.Substring(cL,8,4)+"-"+bJ.Substring(cL,12,4)+"-"+bJ.Substring(cL,16,4)+"-"+cL.substring(20);}else if(cK==="D"){cG=bJ.Trim(cE).toLowerCase();cG.length!==36?bM.ShapeError():void 0;return cJ(cG);}else if(cK==="B"){cH=bJ.Trim(cE).toLowerCase();cH.length!==38||cH[0]!=="{"||cH[17]!=="}"?bM.ShapeError():void 0;return cJ(bJ.Substring(cH,1,36));}else if(cK==="P"){cI=bJ.Trim(cE).toLowerCase();cI.length!==38||cI[0]!=="("||cI[17]!==")"?bM.ShapeError():void 0;return cJ(bJ.Substring(cI,1,36));}else if(cK==="X"){cP=bJ.Trim(cE).toLowerCase();if(cP.length!==68)bM.ShapeError();for(cQ=0,cR=67;cQ<=cR;cQ++){switch(cQ){case 26:case 0:if(cP[cQ]!=="{")bM.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cP[cQ]!=="0")bM.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cP[cQ]!=="x")bM.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cP[cQ]!==",")bM.ShapeError();break;case 67:case 66:if(cP[cQ]!=="{")bM.ShapeError();break;default:cT=cP[cQ];!("0"<=cT&&cT<="9"||"a"<=cT&&cT<="f")?bM.ShapeError():void 0;break;}}return bJ.Substring(cP,3,8)+"-"+bJ.Substring(cP,14,4)+"-"+bJ.Substring(cP,21,4)+"-"+bJ.Substring(cP,29,2)+bJ.Substring(cP,34,2)+"-"+bJ.Substring(cP,39,2)+bJ.Substring(cP,44,2)+bJ.Substring(cP,49,2)+bJ.Substring(cP,54,2)+bJ.Substring(cP,59,2)+bJ.Substring(cP,64,2);}else return bM.FormatError();};bM.ShapeError=function(){throw new cv.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bM.FormatError=function(){throw new cv.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bN=v.List=cy.Class({GetEnumerator:function(){return T.Get(this);},GetEnumerator0:function(){return T.Get0(this);}},null,bN);bO.Static=function(cE){return new bD({$:3,$0:cE});};bO.Dynamic=function(cE,cF){return new bD({$:1,$0:new b8.New(cE,cF)});};bO.EmptyAttr=function(){cm.$cctor();return cm.EmptyAttr;};bO.AppendTree=function(cE,cF){var cG;return cE===null?cF:cF===null?cE:(cG=new bD({$:2,$0:cE,$1:cF}),(bO.SetFlags(cG,bO.Flags(cE)|bO.Flags(cF)),cG));};bO.Insert=function(cE,cF){var cG,cH,cI;function cJ(cK){if(!(cK===null))if(cK!=null&&cK.$==1)cG.push(cK.$0);else if(cK!=null&&cK.$==2){cJ(cK.$0);cJ(cK.$1);}else if(cK!=null&&cK.$==3)cK.$0(cE);else if(cK!=null&&cK.$==4)cH.push(cK.$0);}cG=[];cH=[];cJ(cF);cI=cG.slice(0);return b1.New(cE,bO.Flags(cF),cI,cH.length===0?null:{$:1,$0:function(cK){x.iter(function(cL){cL(cK);},cH);}});};bO.HasExitAnim=function(cE){var cF;cF=2;return(cE.DynFlags&cF)===cF;};bO.GetExitAnim=function(cE){return bO.GetAnim(cE,function(cF,cG){return cF.NGetExitAnim(cG);});};bO.HasEnterAnim=function(cE){var cF;cF=1;return(cE.DynFlags&cF)===cF;};bO.GetEnterAnim=function(cE){return bO.GetAnim(cE,function(cF,cG){return cF.NGetEnterAnim(cG);});};bO.HasChangeAnim=function(cE){var cF;cF=4;return(cE.DynFlags&cF)===cF;};bO.GetChangeAnim=function(cE){return bO.GetAnim(cE,function(cF,cG){return cF.NGetChangeAnim(cG);});};bO.Updates=function(cE){return b7.MapTreeReduce(function(cF){return cF.NChanged();},Y.Const(),Y.Map2Unit,cE.DynNodes);};bO.SetFlags=function(cE,cF){cE.flags=cF;};bO.Flags=function(cE){return cE!==null&&cE.hasOwnProperty("flags")?cE.flags:0;};bO.GetAnim=function(cE,cF){return bW.Concat(_0.map(function(cG){return cF(cG,cE.DynElem);},cE.DynNodes));};bO.Sync=function(cE,cF){_0.iter(function(cG){cG.NSync(cE);},cF.DynNodes);};bO.Empty=function(cE){return b1.New(cE,0,[],null);};bP.AddClass=function(cE,cF){var cG;cG=bP.getClass(cE);cG===""?bP.setClass(cE,cF):!bP.clsRE(cF).test(cG)?bP.setClass(cE,cG+" "+cF):void 0;};bP.RemoveClass=function(cE,cF){var cG;bP.setClass(cE,(cG=bP.clsRE(cF),bP.getClass(cE).replace(cG,function(cH,cI,cJ){return cI===""||cJ===""?"":" ";})));};bP.ParseHTMLIntoFakeRoot=function(cE){var cF,cG,cH,cI,cJ;cF=self.document.createElement("div");return!bP.rhtml().test(cE)?(cF.appendChild(self.document.createTextNode(cE)),cF):(cG=(cH=bP.rtagName().exec(cE),M.Equals(cH,null)?"":_0.get(cH,1).toLowerCase()),(cI=(cJ=(bP.wrapMap())[cG],cJ?cJ:bP.defaultWrap()),(cF.innerHTML=cI[1]+cE.replace(bP.rxhtmlTag(),"<$1></$2>")+cI[2],function(cK,cL){var cM;while(true)if(cL===0)return cK;else{cM=cL;cK=cK.lastChild;cL=cM-1;}}(cF,cI[0]))));};bP.getClass=function(cE){return cE instanceof a.SVGElement?cE.getAttribute("class"):cE.className;};bP.setClass=function(cE,cF){if(cE instanceof a.SVGElement)cE.setAttribute("class",cF);else cE.className=cF;};bP.clsRE=function(cE){return new a.RegExp("(\\s+|^)"+cE+"(?:\\s+"+cE+")*(\\s+|$)","g");};bP.rhtml=function(){ci.$cctor();return ci.rhtml;};bP.wrapMap=function(){ci.$cctor();return ci.wrapMap;};bP.defaultWrap=function(){ci.$cctor();return ci.defaultWrap;};bP.rxhtmlTag=function(){ci.$cctor();return ci.rxhtmlTag;};bP.rtagName=function(){ci.$cctor();return ci.rtagName;};bP.IterSelector=function(cE,cF,cG){var cH,cI,cJ;cH=cE.querySelectorAll(cF);for(cI=0,cJ=cH.length-1;cI<=cJ;cI++)cG(cH[cI]);};bP.InsertAt=function(cE,cF,cG){var cH;if(!(cG.parentNode===cE&&cF===(cH=cG.nextSibling,M.Equals(cH,null)?null:cH)))cE.insertBefore(cG,cF);};bP.ChildrenArray=function(cE){var cF,cG,cH;cF=[];for(cG=0,cH=cE.childNodes.length-1;cG<=cH;cG++)cF.push(cE.childNodes[cG]);return cF;};bP.RemoveNode=function(cE,cF){if(cF.parentNode===cE)cE.removeChild(cF);};bQ.startsWith=function(cE,cF){var cG;switch(cE.$==1?cF.$==1?M.Equals(cE.$0,cF.$0)?(cG=[cF.$0,cF.$1,cE.$0,cE.$1],1):2:2:0){case 0:return{$:1,$0:cF};case 1:return bQ.startsWith(cG[3],cG[1]);case 2:return null;}};bR.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};bS.convertTextNode=function(cE){var cF,cG,cH,cI,cJ,cK;cF=null;cG=0;cI=cE.textContent;cJ=new a.RegExp(H.TextHoleRE(),"g");while(cF=cJ.exec(cI),cF!==null){cE.parentNode.insertBefore(self.document.createTextNode(bT.string(cI,{$:1,$0:cG},{$:1,$0:cJ.lastIndex-_0.get(cF,0).length-1})),cE);cG=cJ.lastIndex;cK=self.document.createElement("span");cK.setAttribute("ws-replace",_0.get(cF,1).toLowerCase());cE.parentNode.insertBefore(cK,cE);}cJ.lastIndex=0;cE.textContent=bT.string(cI,{$:1,$0:cG},null);};bS.failNotLoaded=function(cE){cw.warn("Instantiating non-loaded template",cE);};bS.fillTextHole=function(cE,cF,cG){var cH;cH=cE.querySelector("[ws-replace]");return M.Equals(cH,null)?(cw.warn("Filling non-existent text hole",cG),null):(cH.parentNode.replaceChild(self.document.createTextNode(cF),cH),{$:1,$0:cH.getAttribute("ws-replace")});};bS.removeHolesExcept=function(cE,cF){function cG(cH){H.foreachNotPreserved(cE,"["+cH+"]",function(cI){if(!cF.Contains(cI.getAttribute(cH)))cI.removeAttribute(cH);});}cG("ws-attr");cG("ws-onafterrender");cG("ws-var");H.foreachNotPreserved(cE,"[ws-hole]",function(cH){if(!cF.Contains(cH.getAttribute("ws-hole"))){cH.removeAttribute("ws-hole");while(cH.hasChildNodes())cH.removeChild(cH.lastChild);}});H.foreachNotPreserved(cE,"[ws-replace]",function(cH){if(!cF.Contains(cH.getAttribute("ws-replace")))cH.parentNode.removeChild(cH);});H.foreachNotPreserved(cE,"[ws-on]",function(cH){cH.setAttribute("ws-on",bJ.concat(" ",_0.filter(function(cI){return cF.Contains(_0.get(bJ.SplitChars(cI,[":"],1),1));},bJ.SplitChars(cH.getAttribute("ws-on"),[" "],1))));});H.foreachNotPreserved(cE,"[ws-attr-holes]",function(cH){var cI,cJ,cK,cL,cM;cI=bJ.SplitChars(cH.getAttribute("ws-attr-holes"),[" "],1);for(cJ=0,cK=cI.length-1;cJ<=cK;cJ++){cL=_0.get(cI,cJ);cH.setAttribute(cL,(cM=new a.RegExp(H.TextHoleRE(),"g"),cH.getAttribute(cL).replace(cM,function(cN,cO){return cF.Contains(cO)?cN:"";})));}});};bS.fillInstanceAttrs=function(cE,cF){var cG,cH,cI,cJ,cK;bS.convertAttrs(cF);cG=cF.nodeName.toLowerCase();cH=cE.querySelector("[ws-attr="+cG+"]");if(M.Equals(cH,null))cw.warn("Filling non-existent attr hole",cG);else{cH.removeAttribute("ws-attr");for(cI=0,cJ=cF.attributes.length-1;cI<=cJ;cI++){cK=cF.attributes.item(cI);cK.name==="class"&&cH.hasAttribute("class")?cH.setAttribute("class",cH.getAttribute("class")+" "+cK.nodeValue):cH.setAttribute(cK.name,cK.nodeValue);}}};bS.mapHoles=function(cE,cF){function cG(cH){H.foreachNotPreserved(cE,"["+cH+"]",function(cI){var cJ,cK;cJ=(cK=null,[cF.TryGetValue(cI.getAttribute(cH).toLowerCase(),{get:function(){return cK;},set:function(cL){cK=cL;}}),cK]);cJ[0]?cI.setAttribute(cH,cJ[1]):void 0;});}cG("ws-hole");cG("ws-replace");cG("ws-attr");cG("ws-onafterrender");cG("ws-var");H.foreachNotPreserved(cE,"[ws-on]",function(cH){cH.setAttribute("ws-on",bJ.concat(" ",_0.map(function(cI){var cJ,cK,cL;cJ=bJ.SplitChars(cI,[":"],1);cK=(cL=null,[cF.TryGetValue(_0.get(cJ,1),{get:function(){return cL;},set:function(cM){cL=cM;}}),cL]);return cK[0]?_0.get(cJ,0)+":"+cK[1]:cI;},bJ.SplitChars(cH.getAttribute("ws-on"),[" "],1))));});H.foreachNotPreserved(cE,"[ws-attr-holes]",function(cH){var cI,cJ,cK;cI=bJ.SplitChars(cH.getAttribute("ws-attr-holes"),[" "],1);for(cJ=0,cK=cI.length-1;cJ<=cK;cJ++)(function(){var cL;function cM(cN,cO){var cP;cP=e.KeyValue(cO);return cN.replace(new a.RegExp("\\${"+cP[0]+"}","ig"),"${"+cP[1]+"}");}cL=_0.get(cI,cJ);return cH.setAttribute(cL,(((cy.Curried3(x.fold))(cM))(cH.getAttribute(cL)))(cF));}());});};bS.fill=function(cE,cF,cG){while(true)if(cE.hasChildNodes())cG=cF.insertBefore(cE.lastChild,cG);else return null;};bS.convertAttrs=function(cE){var cG,cH,cI,cJ,cK,cL,cM,cN;function cF(cO){var cP;cP=cE.getAttribute(cO);cP===null?void 0:cE.setAttribute(cO,cP.toLowerCase());}cG=cE.attributes;cH=[];cI=[];cJ=[];for(cK=0,cL=cG.length-1;cK<=cL;cK++){cM=cG.item(cK);bJ.StartsWith(cM.nodeName,"ws-on")&&cM.nodeName!=="ws-onafterrender"&&cM.nodeName!=="ws-on"?(cH.push(cM.nodeName),cI.push(bT.string(cM.nodeName,{$:1,$0:"ws-on".length},null)+":"+cM.nodeValue.toLowerCase())):!bJ.StartsWith(cM.nodeName,"ws-")&&(new a.RegExp(H.TextHoleRE())).test(cM.nodeValue)?(cM.nodeValue=(cN=new a.RegExp(H.TextHoleRE(),"g"),cM.nodeValue.replace(cN,function(cO,cP){return"${"+cP.toLowerCase()+"}";})),cJ.push(cM.nodeName)):void 0;}!(cI.length==0)?cE.setAttribute("ws-on",bJ.concat(" ",cI)):void 0;!(cJ.length==0)?cE.setAttribute("ws-attr-holes",bJ.concat(" ",cJ)):void 0;cF("ws-hole");cF("ws-replace");cF("ws-attr");cF("ws-onafterrender");cF("ws-var");_0.iter(function(cO){cE.removeAttribute(cO);},cH);};bT.string=function(cE,cF,cG){return cF==null?cG!=null&&cG.$==1?cE.slice(0,cG.$0+1):"":cG==null?cE.slice(cF.$0):cE.slice(cF.$0,cG.$0+1);};bU=v.KeyCollection=cy.Class({GetEnumerator$1:function(){return T.Get(x.map(function(cE){return cE.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},o,bU);bU.New=cy.Ctor(function(cE){o.New.call(this);this.d=cE;},bU);bW.get_UseAnimations=function(){return cd.UseAnimations();};bW.Play=function(cE){var cF;cF=null;return bc.Delay(function(){return bc.Bind(bW.Run(a.ignore,cd.Actions(cE)),function(){cd.Finalize(cE);return bc.Return(null);});});};bW.Append=function(cE,cF){return{$:0,$0:ck.Append(cE.$0,cF.$0)};};bW.Run=function(cE,cF){var cG;function cH(cI){function cJ(cK,cL){var cM;cM=cL-cK;cF.Compute(cM);cE();return cM<=cG?void a.requestAnimationFrame(function(cN){cJ(cK,cN);}):cI();}a.requestAnimationFrame(function(cK){cJ(cK,cK);});}cG=cF.Duration;return cG===0?bc.Zero():bc.FromContinuations(function(cI,cJ,cK){return cH.apply(null,[cI,cJ,cK]);});};bW.Concat=function(cE){return{$:0,$0:ck.Concat(x.map(cd.List,cE))};};bW.get_Empty=function(){return{$:0,$0:ck.Empty()};};bX.BatchUpdatesEnabled=function(){ce.$cctor();return ce.BatchUpdatesEnabled;};bY.StartProcessor=function(cE){var cF;function cG(){var cH;cH=null;return bc.Delay(function(){return bc.Bind(cE,function(){var cI;cI=cF[0];return cI===1?(cF[0]=0,bc.Zero()):cI===2?(cF[0]=1,cG()):bc.Zero();});});}cF=[0];return function(){var cH;cH=cF[0];cH===0?(cF[0]=1,bc.Start(cG(),null)):cH===1?cF[0]=2:void 0;};};bZ.New=function(cE,cF){return{c:cE,r:cF};};bA.Obsolete=function(cE){var cF,cG,cH,cI,cJ;cG=cE.s;if(cG==null||(cG!=null&&cG.$==2?(cF=cG.$1,false):cG!=null&&cG.$==3?(cF=cG.$1,false):true))void 0;else{cE.s=null;for(cH=0,cI=_0.length(cF)-1;cH<=cI;cH++){cJ=_0.get(cF,cH);typeof cJ=="object"?function(cK){bA.Obsolete(cK);}(cJ):cJ();}}};bA.New=function(cE){return{s:cE};};b1.New=function(cE,cF,cG,cH){var cI;cI={DynElem:cE,DynFlags:cF,DynNodes:cG};cy.SetOptional(cI,"OnAfterRender",cH);return cI;};b2=d.InvalidOperationException=cy.Class({},bF,b2);b2.New=cy.Ctor(function(cE){b2.New$2.call(this,cE,null);},b2);b2.New$2=cy.Ctor(function(cE,cF){this.message=cE;this.inner=cF;_1.setPrototypeOf(this,b2.prototype);},b2);b3=bc.Scheduler=cy.Class({Fork:function(cE){var cF;cF=this;this.robin.push(cE);this.idle?(this.idle=false,a.setTimeout(function(){cF.tick();},0)):void 0;},tick:function(){var cE,cF,cG;cF=this;cG=cC.now();cE=true;while(cE)if(this.robin.length===0){this.idle=true;cE=false;}else{(this.robin.shift())();cC.now()-cG>40?(a.setTimeout(function(){cF.tick();},0),cE=false):void 0;}}},o,b3);b3.New=cy.Ctor(function(){o.New.call(this);this.idle=true;this.robin=[];},b3);b4=d.OperationCanceledException=cy.Class({},bF,b4);b4.New=cy.Ctor(function(cE){b4.New$1.call(this,"The operation was canceled.",null,cE);},b4);b4.New$1=cy.Ctor(function(cE,cF,cG){this.message=cE;this.inner=cF;_1.setPrototypeOf(this,b4.prototype);this.ct=cG;},b4);b5=d.CancellationTokenSource=cy.Class({},o,b5);b5.New=cy.Ctor(function(){o.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},b5);b6=D.FromView=cy.Class({UpdateMaybe:function(cE){var cF;cF=this;Y.Get(function(cG){var cH;cH=cE(cG);cH!=null&&cH.$==1?cF.set(cH.$0):void 0;},this.view);},Set:function(cE){this.set(cE);},get_View:function(){return this.view;},Get:function(){return this.current;},Update:function(cE){var cF;Y.Get((cF=this.set,function(cG){return cF(cE(cG));}),this.view);}},E,b6);b6.New=cy.Ctor(function(cE,cF){var cG,cH;cG=this;E.New.call(this);this.set=cF;this.id=bu.Int();this.current=(cH=Y.TryGet(cE),cH==null?null:cH.$0);this.view=Y.Map(function(cI){cG.current=cI;return cI;},cE);},b6);b7.ofSeqNonCopying=function(cE){var cF,cG;if(cE instanceof a.Array)return cE;else if(cE instanceof bb)return _0.ofList(cE);else if(cE===null)return[];else{cF=[];cG=T.Get(cE);try{while(cG.MoveNext())cF.push(cG.Current());return cF;}finally{if(typeof cG=="object"&&"Dispose"in cG)cG.Dispose();}}};b7.TreeReduce=function(cE,cF,cG){var cH;function cI(cJ,cK){var cL,cM;return cK<=0?cE:cK===1&&(cJ>=0&&cJ<cH)?_0.get(cG,cJ):(cM=cK/2>>0,cF(cI(cJ,cM),cI(cJ+cM,cK-cM)));}cH=_0.length(cG);return cI(0,cH);};b7.mapInPlace=function(cE,cF){var cG,cH;for(cG=0,cH=cF.length-1;cG<=cH;cG++)cF[cG]=cE(cF[cG]);return cF;};b7.MapTreeReduce=function(cE,cF,cG,cH){var cI;function cJ(cK,cL){var cM,cN;return cL<=0?cF:cL===1&&(cK>=0&&cK<cI)?cE(_0.get(cH,cK)):(cN=cL/2>>0,cG(cJ(cK,cN),cJ(cK+cN,cL-cN)));}cI=_0.length(cH);return cJ(0,cI);};b8=D.DynamicAttrNode=cy.Class({NGetExitAnim:function(cE){return bW.get_Empty();},NGetEnterAnim:function(cE){return bW.get_Empty();},NGetChangeAnim:function(cE){return bW.get_Empty();},NChanged:function(){return this.updates;},NSync:function(cE){if(this.dirty){(this.push(cE))(this.value);this.dirty=false;}}},o,b8);b8.New=cy.Ctor(function(cE,cF){var cG;cG=this;o.New.call(this);this.push=cF;this.value=void 0;this.dirty=false;this.updates=Y.Map(function(cH){cG.value=cH;cG.dirty=true;},cE);},b8);b9.$cctor=function(){b9.$cctor=a.ignore;b9.initialized=new _4.New$5();};b9=bn.TemplateInitializer=cy.Class({},o,b9);b9.GetOrAddHoleFor=function(cE,cF,cG){var cH,cI,cJ,cK;b9.$cctor();cH=b9.GetHolesFor(cE);cI=(cJ=null,[cH.TryGetValue(cF,{get:function(){return cJ;},set:function(cL){cJ=cL;}}),cJ]);return cI[0]?cI[1]:(cK=cG(),(cH.set_Item(cF,cK),cK));};b9.GetHolesFor=function(cE){var cF,cG,cH;b9.$cctor();cF=(cG=null,[b9.initialized.TryGetValue(cE,{get:function(){return cG;},set:function(cI){cG=cI;}}),cG]);return cF[0]?cF[1]:(cH=new _4.New$5(),(b9.initialized.set_Item(cE,cH),cH));};b_.$cctor=function(){b_.$cctor=a.ignore;b_.counter=0;};b$.$cctor=function(){b$.$cctor=a.ignore;function cE(cF){var cG,cH;cG=(cH=0,[_7.TryParseInt32(cF,{get:function(){return cH;},set:function(cI){cH=cI;}}),cH]);return cG[0]?{$:1,$0:cG[1]}:null;}b$.Empty=bH.New$1(function(){return[];},function(){return null;});b$.rRoot=bH.New(function(cF){return[cF];},[]);b$.rString=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==0?[[cF,""]]:(cH=cg.read(cG.$0),cH!=null&&cH.$==1?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH.$0]]:[]);},function(cF){return{$:1,$0:[bd.Segment$2(cF==null?"null":cg.write(cF))]};});b$.rChar=bH.New$1(function(cF){var cG,cH,cI;cG=cF.Segments;return cG.$==1?(cH=cg.read(cG.$0),cH!=null&&cH.$==1&&(cH.$0.length===1&&(cI=cH.$0,true))?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),ch.Parse(cI)]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(cF)]};});b$.rGuid=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=null,bM.TryParse(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rInt=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=0,_7.TryParseInt32(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rDouble=bH.New$1(function(cF){var cG,cH,cI;cG=cF.Segments;return cG.$==1?(cH=0,(cI=cA(cG.$0),a.isNaN(cI)?false:(cH=cI,true))?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rSByte=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=0,_7.TryParseSByte(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rByte=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=0,_7.TryParseByte(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rInt16=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=0,_7.TryParseInt16(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rUInt16=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=0,_7.TryParseUInt16(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rUInt=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=0,_7.TryParseUInt32(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rInt64=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=0,_7.TryParseInt64(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rUInt64=bH.New$1(function(cF){var cG,cH;cG=cF.Segments;return cG.$==1?(cH=0,_7.TryParseUInt64(cG.$0,{get:function(){return cH;},set:function(cI){cH=cI;}})?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rSingle=bH.New$1(function(cF){var cG,cH,cI;cG=cF.Segments;return cG.$==1?(cH=0,(cI=cA(cG.$0),a.isNaN(cI)?false:(cH=cI,true))?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(a.String(cF))]};});b$.rBool=bH.New$1(function(cF){var cG,cH,cI;cG=cF.Segments;return cG.$==1?(cH=(cI=null,[_7.TryParseBool(cG.$0,{get:function(){return cI;},set:function(cJ){cI=cJ;}}),cI]),cH[0]?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),cH[1]]]:[]):[];},function(cF){return{$:1,$0:[bd.Segment$2(cF?"True":"False")]};});b$.rWildcard=bH.New$1(function(cF){return[[bd.New(bb.Empty,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),bJ.concat("/",cF.Segments)]];},function(cF){return{$:1,$0:[bd.Segment$2(cF)]};});b$.rDateTime=bH.New$1(function(cF){var cG,cH,cI,cJ,cK,cL,cM,cN,cO;cG=cF.Segments;return cG.$==1?(cH=cG.$0,cH.length===19&&cH[4]==="-"&&cH[7]==="-"&&cH[10]==="-"&&cH[13]==="."&&cH[16]==="."?(cI=cE(bT.string(cH,{$:1,$0:0},{$:1,$0:3})),(cJ=cE(bT.string(cH,{$:1,$0:5},{$:1,$0:6})),(cK=cE(bT.string(cH,{$:1,$0:8},{$:1,$0:9})),(cL=cE(bT.string(cH,{$:1,$0:11},{$:1,$0:12})),(cM=cE(bT.string(cH,{$:1,$0:14},{$:1,$0:15})),(cN=cE(bT.string(cH,{$:1,$0:17},{$:1,$0:18})),cI!=null&&cI.$==1&&(cJ!=null&&cJ.$==1&&(cK!=null&&cK.$==1&&(cL!=null&&cL.$==1&&(cM!=null&&cM.$==1&&(cN!=null&&cN.$==1&&(cO=[cK.$0,cL.$0,cJ.$0,cM.$0,cN.$0,cI.$0],true))))))?[[bd.New(cG.$1,cF.QueryArgs,cF.FormData,cF.Method,cF.Body),(new cC(cO[5],cO[2]-1,cO[0],cO[1],cO[3],cO[4])).getTime()]]:[])))))):[]):[];},function(cF){var cG,cH;function cI(cJ){var cK;cK=a.String(cJ);return cK.length===1?"0"+cK:cK;}return{$:1,$0:[bd.Segment$2((cG=a.String((new cC(cF)).getFullYear()),(cH=cG.length,cH===1?"000"+cG:cH===2?"00"+cG:cH===3?"0"+cG:cG))+"-"+cI((new cC(cF)).getMonth()+1)+"-"+cI((new cC(cF)).getDate())+"-"+cI((new cC(cF)).getHours())+"."+cI((new cC(cF)).getMinutes())+"."+cI((new cC(cF)).getSeconds()))]};});};cb.New=function(cE,cF){return{PreviousNodes:cE,Top:cF};};cc.get_Empty=function(){return{$:0,$0:new bx.New$3()};};cc.FindAll=function(cE){var cF;function cG(cI){if(cI!=null&&cI.$==0){cG(cI.$0);cG(cI.$1);}else if(cI!=null&&cI.$==1)cH(cI.$0);else if(cI!=null&&cI.$==2)cG(cI.$0.Current);else if(cI!=null&&cI.$==6)_0.iter(cH,cI.$0.Holes);}function cH(cI){cF.push(cI);cG(cI.Children);}cF=[];cG(cE);return{$:0,$0:new bx.New$2(cF)};};cc.Filter=function(cE,cF){return{$:0,$0:co.Filter(cE,cF.$0)};};cc.Except=function(cE,cF){return{$:0,$0:co.Except(cE.$0,cF.$0)};};cc.ToArray=function(cE){return co.ToArray(cE.$0);};cc.Intersect=function(cE,cF){return{$:0,$0:co.Intersect(cE.$0,cF.$0)};};cd.UseAnimations=function(){cj.$cctor();return cj.UseAnimations;};cd.Actions=function(cE){return cd.ConcatActions(_0.choose(function(cF){return cF.$==1?{$:1,$0:cF.$0}:null;},ck.ToArray(cE.$0)));};cd.Finalize=function(cE){_0.iter(function(cF){if(cF.$==0)cF.$0();},ck.ToArray(cE.$0));};cd.ConcatActions=function(cE){var cF,cG,cH,cI;cF=b7.ofSeqNonCopying(cE);cG=_0.length(cF);return cG===0?cd.Const():cG===1?_0.get(cF,0):(cH=x.max(x.map(function(cJ){return cJ.Duration;},cF)),(cI=_0.map(function(cJ){return cd.Prolong(cH,cJ);},cF),cd.Def(cH,function(cJ){_0.iter(function(cK){cK.Compute(cJ);},cI);})));};cd.List=function(cE){return cE.$0;};cd.Const=function(cE){return cd.Def(0,function(){return cE;});};cd.Def=function(cE,cF){return{Compute:cF,Duration:cE};};cd.Prolong=function(cE,cF){var cG,cH,cI;cG=cF.Compute;cH=cF.Duration;cI=N.Create(function(){return cF.Compute(cF.Duration);});return{Compute:function(cJ){return cJ>=cH?cI.f():cG(cJ);},Duration:cE};};ce.$cctor=function(){ce.$cctor=a.ignore;ce.BatchUpdatesEnabled=true;};cf=D.CheckedInput=cy.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,cf);bH.New=function(cE,cF){return{Parse:cE,Segment:cF};};cg.read=function(cE){var cF;cF=[];return function(cG){var cH;while(true){cH=cg.readEscapedFromChars(cG);if(cH[0]===-2)return null;else if(cH[0]===-1)return{$:1,$0:(function(cI){return function(cJ){return bJ.concat(cI,cJ);};}(""))(cF)};else{cF.push(cD.fromCharCode(cH[0]));cG=cH[1];}}}(S.ofSeq(x.map(function(cG){return cG.charCodeAt();},cE)));};cg.write=function(cE){return bJ.concat("",x.mapi(function(cF,cG){return cg.writeEscapedAsString(cF+1===cE.length,cG);},cE));};cg.readEscapedFromChars=function(cE){var cF,cG,cH,cI,cJ,cK,cL,cM;function cN(){var cP,cQ;return cF.$==1?(cP=cF.$1,(cQ=cF.$0,(cF=cP,cQ))):-1;}function cO(cP){return cP>="0".charCodeAt()&&cP<="9".charCodeAt()?cP-"0".charCodeAt():cP>="a".charCodeAt()&&cP<="f".charCodeAt()?cP-"a".charCodeAt()+10:cP>="A".charCodeAt()&&cP<="F".charCodeAt()?cP-"A".charCodeAt()+10:-2;}cF=cE;return[(cG=cN(),cG==="~".charCodeAt()?(cH=cN(),cH==="u".charCodeAt()?(cI=cN(),(cJ=cN(),(cK=cN(),(cL=cN(),cI>=0&&cJ>=0&&cK>=0&&cL>=0?cg.op_PlusPlus(cg.op_PlusPlus(cg.op_PlusPlus(cO(cI),cO(cJ)),cO(cK)),cO(cL)):-2)))):(cM=cN(),cH>=0&&cM>=0?cg.op_PlusPlus(cO(cH),cO(cM)):-2)):cG),cF];};cg.writeEscapedAsString=function(cE,cF){var cG;cG=cF.charCodeAt();return cg.isUnreserved(cE,cF)?cF:cG<256?"~"+bJ.PadLeftWith(cG.toString(16),2,"0"):"~u"+bJ.PadLeftWith(cG.toString(16),4,"0");};cg.op_PlusPlus=function(cE,cF){return(cE<<4)+cF;};cg.isUnreserved=function(cE,cF){return cF==="-"||(cF==="."?!cE:cF==="_"||(cF>="A"&&cF<="Z"||(cF>="a"&&cF<="z"||cF>="0"&&cF<="9")));};ch.Parse=function(cE){return cE.length===1?cE:e.FailWith("String must be exactly one character long.");};ch.IsWhiteSpace=function(cE){return cE.match(new a.RegExp("\\s"))!==null;};_7.TryParseSByte=function(cE,cF){return _7.TryParse(cE,-128,127,cF);};_7.TryParseByte=function(cE,cF){return _7.TryParse(cE,0,255,cF);};_7.TryParseInt16=function(cE,cF){return _7.TryParse(cE,-32768,32767,cF);};_7.TryParseUInt16=function(cE,cF){return _7.TryParse(cE,0,65535,cF);};_7.TryParseUInt32=function(cE,cF){return _7.TryParse(cE,0,4294967295,cF);};_7.TryParseInt64=function(cE,cF){return _7.TryParse(cE,-9223372036854775808,9223372036854775807,cF);};_7.TryParseUInt64=function(cE,cF){return _7.TryParse(cE,0,18446744073709551615,cF);};ci.$cctor=function(){var cE;ci.$cctor=a.ignore;ci.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");ci.rtagName=new a.RegExp("<([\\w:]+)");ci.rhtml=new a.RegExp("<|&#?\\w+;");ci.wrapMap=(cE=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:cE,tbody:cE,tfoot:cE,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});ci.defaultWrap=[0,"",""];};cj.$cctor=function(){cj.$cctor=a.ignore;cj.CubicInOut=cn.Custom(function(cE){var cF;cF=cE*cE;return 3*cF-2*(cF*cE);});cj.UseAnimations=true;};ck.Append=function(cE,cF){return cE.$==0?cF:cF.$==0?cE:{$:2,$0:cE,$1:cF};};ck.ToArray=function(cE){var cF;function cG(cH){if(cH.$==1)cF.push(cH.$0);else if(cH.$==2){cG(cH.$0);cG(cH.$1);}else if(cH.$==3)_0.iter(function(cI){cF.push(cI);},cH.$0);}cF=[];cG(cE);return cF.slice(0);};ck.Concat=function(cE){var cF;cF=b7.ofSeqNonCopying(cE);return b7.TreeReduce(ck.Empty(),ck.Append,cF);};ck.Empty=function(){cu.$cctor();return cu.Empty;};cl.concat=function(cE){var cF,cG;cF=[];for(var cH in cE)cF.push.apply(cF,cE[cH]);return cF;};cm.$cctor=function(){var cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN;cm.$cctor=a.ignore;cm.EmptyAttr=null;cm.BoolCheckedApply=cy.Curried3(function(cO,cP,cQ){return[cP(function(cR){cR.addEventListener("change",function(){return!M.Equals(cO.Get(),cR.checked)?cO.Set(cR.checked):null;});}),cQ(function(cR){return function(cS){cR.checked=cS;};})];});cm.StringSet=function(cO){return function(cP){cO.value=cP;};};cm.StringGet=function(cO){return{$:1,$0:cO.value};};cm.StringApply=(cE=cp.StringGet(),(cF=cp.StringSet(),cy.Curried(cp.ApplyValue,3,[cE,function(cO,cP){return(cF(cO))(cP);}])));cm.IntSetUnchecked=function(cO){return function(cP){cO.value=cD(cP);};};cm.IntGetUnchecked=function(cO){var cP,cQ;cP=cO.value;return cq.isBlank(cP)?{$:1,$0:0}:(cQ=+cP,cQ!==cQ>>0?null:{$:1,$0:cQ});};cm.IntApplyUnchecked=(cG=cp.IntGetUnchecked(),(cH=cp.IntSetUnchecked(),cy.Curried(cp.ApplyValue,3,[cG,function(cO,cP){return(cH(cO))(cP);}])));cm.IntSetChecked=function(cO){return function(cP){var cQ;cQ=cP.get_Input();return cO.value!==cQ?void(cO.value=cQ):null;};};cm.IntGetChecked=function(cO){var cP,cQ,cR;cP=cO.value;return{$:1,$0:cq.isBlank(cP)?(cO.checkValidity?cO.checkValidity():true)?new cf({$:2,$0:cP}):new cf({$:1,$0:cP}):(cQ=(cR=0,[_7.TryParseInt32(cP,{get:function(){return cR;},set:function(cS){cR=cS;}}),cR]),cQ[0]?new cf({$:0,$0:cQ[1],$1:cP}):new cf({$:1,$0:cP}))};};cm.IntApplyChecked=(cI=cp.IntGetChecked(),(cJ=cp.IntSetChecked(),cy.Curried(cp.ApplyValue,3,[cI,function(cO,cP){return(cJ(cO))(cP);}])));cm.FloatSetUnchecked=function(cO){return function(cP){cO.value=cD(cP);};};cm.FloatGetUnchecked=function(cO){var cP,cQ;cP=cO.value;return cq.isBlank(cP)?{$:1,$0:0}:(cQ=+cP,a.isNaN(cQ)?null:{$:1,$0:cQ});};cm.FloatApplyUnchecked=(cK=cp.FloatGetUnchecked(),(cL=cp.FloatSetUnchecked(),cy.Curried(cp.ApplyValue,3,[cK,function(cO,cP){return(cL(cO))(cP);}])));cm.FloatSetChecked=function(cO){return function(cP){var cQ;cQ=cP.get_Input();return cO.value!==cQ?void(cO.value=cQ):null;};};cm.FloatGetChecked=function(cO){var cP,cQ;cP=cO.value;return{$:1,$0:cq.isBlank(cP)?(cO.checkValidity?cO.checkValidity():true)?new cf({$:2,$0:cP}):new cf({$:1,$0:cP}):(cQ=+cP,a.isNaN(cQ)?new cf({$:1,$0:cP}):new cf({$:0,$0:cQ,$1:cP}))};};cm.FloatApplyChecked=(cM=cp.FloatGetChecked(),(cN=cp.FloatSetChecked(),cy.Curried(cp.ApplyValue,3,[cM,function(cO,cP){return(cN(cO))(cP);}])));};_7.TryParse=function(cE,cF,cG,cH){var cI,cJ;cI=+cE;cJ=cI===cI-cI%1&&cI>=cF&&cI<=cG;cJ?cH.set(cI):void 0;return cJ;};_7.TryParseBool=function(cE,cF){var cG;cG=cE.toLowerCase();return cG==="true"?(cF.set(true),true):cG==="false"&&(cF.set(false),true);};cn=D.Easing=cy.Class({},o,cn);cn.Custom=function(cE){return new cn.New(cE);};cn.New=cy.Ctor(function(cE){o.New.call(this);this.transformTime=cE;},cn);co.Filter=function(cE,cF){return new bx.New$2(_0.filter(cE,co.ToArray(cF)));};co.Except=function(cE,cF){var cG;cG=new bx.New$2(co.ToArray(cF));cG.ExceptWith(co.ToArray(cE));return cG;};co.ToArray=function(cE){var cF;cF=_0.create(cE.get_Count(),void 0);cE.CopyTo(cF);return cF;};co.Intersect=function(cE,cF){var cG;cG=new bx.New$2(co.ToArray(cE));cG.IntersectWith(co.ToArray(cF));return cG;};cp.ApplyValue=function(cE,cF,cG,cH,cI){return[cH(function(cJ){function cK(){cG.UpdateMaybe(function(cL){var cM,cN;cM=cE(cJ);return cM!=null&&cM.$==1&&(!M.Equals(cM.$0,cL)&&(cN=[cM,cM.$0],true))?cN[0]:null;});}cJ.addEventListener("change",cK);cJ.addEventListener("input",cK);cJ.addEventListener("keypress",cK);}),cI(function(cJ){return function(cK){var cL,cM;cL=cE(cJ);return cL!=null&&cL.$==1&&(M.Equals(cL.$0,cK)&&(cM=cL.$0,true))?null:cF(cJ,cK);};})];};cp.StringSet=function(){cm.$cctor();return cm.StringSet;};cp.StringGet=function(){cm.$cctor();return cm.StringGet;};cp.IntSetUnchecked=function(){cm.$cctor();return cm.IntSetUnchecked;};cp.IntGetUnchecked=function(){cm.$cctor();return cm.IntGetUnchecked;};cp.IntSetChecked=function(){cm.$cctor();return cm.IntSetChecked;};cp.IntGetChecked=function(){cm.$cctor();return cm.IntGetChecked;};cp.FloatSetUnchecked=function(){cm.$cctor();return cm.FloatSetUnchecked;};cp.FloatGetUnchecked=function(){cm.$cctor();return cm.FloatGetUnchecked;};cp.FloatSetChecked=function(){cm.$cctor();return cm.FloatSetChecked;};cp.FloatGetChecked=function(){cm.$cctor();return cm.FloatGetChecked;};cp.StringApply=function(){cm.$cctor();return cm.StringApply;};cp.BoolCheckedApply=function(){cm.$cctor();return cm.BoolCheckedApply;};cp.IntApplyChecked=function(){cm.$cctor();return cm.IntApplyChecked;};cp.IntApplyUnchecked=function(){cm.$cctor();return cm.IntApplyUnchecked;};cp.FloatApplyChecked=function(){cm.$cctor();return cm.FloatApplyChecked;};cp.FloatApplyUnchecked=function(){cm.$cctor();return cm.FloatApplyUnchecked;};cq.isBlank=function(cE){return bJ.forall(ch.IsWhiteSpace,cE);};cr.Clear=function(cE){cE.splice(0,_0.length(cE));};cs=v.ValueCollection=cy.Class({GetEnumerator$1:function(){return T.Get(x.map(function(cE){return cE.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},o,cs);cs.New=cy.Ctor(function(cE){o.New.call(this);this.d=cE;},cs);ct.Children=function(cE,cF){var cG,cH,cI;if(cF!=null&&cF.$==1){cI=[];cG=cF.$0[0].nextSibling;while(cG!==cF.$0[1]){cI.push(cG);cG=cG.nextSibling;}return{$:0,$0:cI};}else return{$:0,$0:_0.init(cE.childNodes.length,(cH=cE.childNodes,function(cJ){return cH[cJ];}))};};ct.Except=function(cE,cF){var cG;cG=cE.$0;return{$:0,$0:_0.filter(function(cH){return _0.forall(function(cI){return!(cH===cI);},cG);},cF.$0)};};ct.Iter=function(cE,cF){_0.iter(cE,cF.$0);};ct.DocChildren=function(cE){var cF;function cG(cH){if(cH!=null&&cH.$==2)cG(cH.$0.Current);else if(cH!=null&&cH.$==1)cF.push(cH.$0.El);else if(cH==null);else if(cH!=null&&cH.$==5)cF.push(cH.$0);else if(cH!=null&&cH.$==4)cF.push(cH.$0.Text);else if(cH!=null&&cH.$==6)_0.iter(function(cI){if(cI==null||cI.constructor===_1)cG(cI);else cF.push(cI);},cH.$0.Els);else{cG(cH.$0);cG(cH.$1);}}cF=[];cG(cE.Children);return{$:0,$0:b7.ofSeqNonCopying(cF)};};cu.$cctor=function(){cu.$cctor=a.ignore;cu.Empty={$:0};};cv=d.FormatException=cy.Class({},bF,cv);cv.New$1=cy.Ctor(function(cE){this.message=cE;_1.setPrototypeOf(this,cv.prototype);},cv);cy.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
